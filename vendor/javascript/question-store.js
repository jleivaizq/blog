// question-store@0.11.1 downloaded from https://ga.jspm.io/npm:question-store@0.11.1/index.js

import e from"os";import t from"util";import o from"path";import r from"debug";import n from"question-cache";import i from"lazy-cache";import s from"common-config";import a from"data-store";import c from"is-answer";import f from"project-name";import u from"process";var l={};var m=i(null);var p=null;require=m;s;a;c;f;require=p;m.sync=function(e,t,o){var r;Object.defineProperty(e,t,{configurable:true,enumerable:true,set:function(e){r=e},get:function(){if(r)return r;"function"===typeof o&&(o=o.call(e));r=o;return o}})};l=m;var g=l;var d={};var h=u;var v=e;var b=t;var w=o;var y=r("question-store");var j=n;var S=g;var q;var Q;var z;function QuestionsStore(e){y("initializing from <%s>",new URL(import.meta.url).pathname);j.call(this,e);this.createStores(this,this.options);this.listen(this)}b.inherits(QuestionsStore,j);QuestionsStore.prototype.createStores=function(e,t){S.sync(this,"globals",(function(){y("creating globals store");if("undefined"===typeof q){y("created globals store");q=t.globals||new S.Store(w.join("question-store","globals"),{cwd:v.homedir()})}return q}));S.sync(this,"common",(function(){return S.config}));S.sync(this,"store",(function(){y("creating project store");if("undefined"===typeof Q){Q=t.store||new S.Store(w.join("question-store",e.project||""));y("created project store")}return Q}));S.sync(this,"hints",(function(){y("creating hints store");if("undefined"===typeof z){var t=w.basename(e.options.cwd||h.cwd());z=e.store.create(t+"/hints");y("created hints store")}return z}))};QuestionsStore.prototype.listen=function(e){this.on("ask",(function(t,o,r,n){if(!S.isAnswer(t)&&e.enabled("common")){t=r.answer=e.common.get(o);y('no answer found, using common-config: "%s"',t)}if(!S.isAnswer(t)&&e.enabled("global")){r.answer=e.globals.get(o);y('no answer found, using global-store: "%s"',t)}}));this.on("answer",(function(t,o,r,n){var i=r._options;if(i.enabled("save")){y("saving answer in project store: %j",t);e.store.set(o,t)}if(i.enabled("global")){y("saving answer in global store: %j",t);e.globals.set(o,t)}if(!i.disabled("hint")){y("saving answer in hints store: %j",t);e.hints.set(o,t)}}))};d=QuestionsStore;var A=d;export default A;

