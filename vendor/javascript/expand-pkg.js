// expand-pkg@0.1.9 downloaded from https://ga.jspm.io/npm:expand-pkg@0.1.9/index.js

import r from"path";import i from"debug";import o from"component-emitter";import t from"export-files";import e from"fs";import n from"lazy-cache";import a from"defaults-deep";import m from"get-value";import s from"kind-of";import f from"load-pkg";import p from"mixin-deep";import l from"omit-empty";import d from"normalize-pkg";import u from"parse-author";import c from"parse-git-config";import g from"repo-utils";import h from"process";var v={};v=t(new URL(import.meta.url.slice(0,import.meta.url.lastIndexOf("/"))).pathname);var y=v;var z={};var b=e;var w=r;var k=n(null);var x=null;require=k;a;m;s;f;p;l;d;u;c;g;require=x;k.isObject=function(r){return"object"===k.typeOf(r)};k.isString=function(r){return r&&"string"===typeof r};k.arrayify=function(r){return r?Array.isArray(r)?r:[r]:[]};z=k;var C=z;var j={};var O=y;var q=C;j=function(r){var i=new q.Pkg(r);var o=i.schema.field("owner","string",{normalize:O.owner}).field("author",["object","string"],{normalize:O.person}).field("authors","array",{normalize:O.persons}).field("maintainers","array",{normalize:O.persons}).field("contributors","array",{normalize:O.persons}).field("collaborators","array",{normalize:O.persons}).field("git",["object","string"],{normalize:O.git});o.addFields(r);return o};var A=j;var L={};var P=h;var R=r;var U=i("expand:pkg");var F=o;var I=A;var S=C;function Config(r){if(!(this instanceof Config))return new Config(r);U("initializing <%s>",new URL(import.meta.url).pathname);this.options=r||{};this.schema=I(this.options);this.data=this.schema.data;this.schema.on("warning",this.emit.bind(this,"warning"));this.schema.on("error",this.emit.bind(this,"error"))}F(Config.prototype);Config.prototype.field=function(r,i,o){U('adding "%s"',r);"function"===typeof o&&(o={normalize:o});true===o.extend&&(o=S.merge({},this.schema.get(r),o));this.schema.field(r,i,o);return this};Config.prototype.expand=function(r,i){"undefined"===typeof r&&(r=R.resolve(P.cwd(),"package.json"));"string"===typeof r&&(r=S.loadPkg.sync(r));return this.schema.normalize(r,i)};L=Config;var B=L;export default B;

