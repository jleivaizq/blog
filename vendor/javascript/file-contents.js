// file-contents@0.2.4 downloaded from https://ga.jspm.io/npm:file-contents@0.2.4/index.js

import t from"lazy-cache";import r from"file-stat";import e from"graceful-fs";import n from"extend-shallow";import o from"through2";import a from"is-utf8";var f={};var c=t(null);var i=null;require=c;r;e;n;o;a;require=i;c.stripBom=function(t){return c.isUtf8(t)&&"\ufeff"===t.slice(0,3).toString()?t.slice(3):t};f=c;var s=f;var u={};var l=s;u=function fileContents(t){return l.through.obj((function(r,e,n){async(r,t,(function(t,r){t?n(t):n(null,r)}))}))};function async(t,r,e){if("object"!==typeof t)throw new TypeError("expected file to be an object");if("function"===typeof r){e=r;r={}}if("function"!==typeof e)throw new TypeError("expected callback to be a function");if(!t.stat)return l.stats.getStats(t,(function(t,n){if(t)return e(t);async(n,r,e)}));try{if(t.stat.isDirectory())return e(null,t)}catch(t){return e(t)}var n=l.extend({},r,t.options||{});if(true===n.noread||false===n.read)return e(null,t);if(false!==n.buffer)return l.fs.readFile(t.path,(function(r,n){if(r)return e(r);t.contents=l.stripBom(n);e(null,t)}));try{t.contents=l.fs.createReadStream(t.path);e(null,t)}catch(t){e(t)}}function sync(t,r){if("object"!==typeof t)throw new TypeError("expected file to be an object.");t.stat||(t.stat=l.fs.lstatSync(t.path));if(t.stat.isDirectory())return t;var e=l.extend({},r,t.options);if(true===e.noread||false===e.read)return t;if(false!==e.buffer){t.contents=l.stripBom(l.fs.readFileSync(t.path));return t}try{t.contents=l.fs.createReadStream(t.path);return t}catch(t){throw t}}u.async=async;u.sync=sync;var p=u;const y=u.async,h=u.sync;export default p;export{y as async,h as sync};

