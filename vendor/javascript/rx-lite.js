// rx-lite@4.0.8 downloaded from https://ga.jspm.io/npm:rx-lite@4.0.8/rx.lite.js

import e from"process";var t="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:global;var r={};var n={exports:r};var s=e;(function(e){var i={function:true,object:true};function checkGlobal(e){return e&&e.Object===Object?e:null}var o=i["object"]&&r&&!r.nodeType?r:null;var u=i["object"]&&n&&!n.nodeType?n:null;var a=checkGlobal(o&&u&&"object"===typeof t&&t);var c=checkGlobal(i[typeof self]&&self);var l=checkGlobal(i[typeof window]&&window);var h=u&&u.exports===o?o:null;var p=checkGlobal(i[typeof(this||t)]&&(this||t));var f=a||l!==(p&&p.window)&&l||c||p||Function("return this")();var b={internals:{},config:{Promise:f.Promise},helpers:{}};var v=b.helpers.noop=function(){},d=b.helpers.identity=function(e){return e},y=b.helpers.defaultNow=Date.now,O=b.helpers.defaultComparer=function(e,t){return Se(e,t)},m=b.helpers.defaultSubComparer=function(e,t){return e>t?1:e<t?-1:0},_=b.helpers.defaultKeySerializer=function(e){return e.toString()},w=b.helpers.defaultError=function(e){throw e},g=b.helpers.isPromise=function(e){return!!e&&"function"!==typeof e.subscribe&&"function"===typeof e.then},S=b.helpers.isFunction=function(){var isFn=function(e){return"function"==typeof e||false};isFn(/x/)&&(isFn=function(e){return"function"==typeof e&&"[object Function]"==toString.call(e)});return isFn}();function cloneArray(e){var t=e.length,r=new Array(t);for(var n=0;n<t;n++)r[n]=e[n];return r}var C={e:{}};function tryCatcherGen(e){return function tryCatcher(){try{return e.apply(this||t,arguments)}catch(e){C.e=e;return C}}}var D=b.internals.tryCatch=function tryCatch(e){if(!S(e))throw new TypeError("fn must be a function");return tryCatcherGen(e)};function thrower(e){throw e}b.config.longStackSupport=false;var E=false,x=D((function(){throw new Error}))();E=!!x.e&&!!x.e.stack;var A=captureLine(),N;var k="From previous event:";function makeStackTraceLong(e,t){if(E&&t.stack&&"object"===typeof e&&null!==e&&e.stack&&-1===e.stack.indexOf(k)){var r=[];for(var n=t;!!n;n=n.source)n.stack&&r.unshift(n.stack);r.unshift(e.stack);var s=r.join("\n"+k+"\n");e.stack=filterStackString(s)}}function filterStackString(e){var t=e.split("\n"),r=[];for(var n=0,s=t.length;n<s;n++){var i=t[n];isInternalFrame(i)||isNodeFrame(i)||!i||r.push(i)}return r.join("\n")}function isInternalFrame(e){var t=getFileNameAndLineNumber(e);if(!t)return false;var r=t[0],n=t[1];return r===N&&n>=A&&n<=An}function isNodeFrame(e){return-1!==e.indexOf("(module.js:")||-1!==e.indexOf("(node.js:")}function captureLine(){if(E)try{throw new Error}catch(n){var e=n.stack.split("\n");var t=e[0].indexOf("@")>0?e[1]:e[2];var r=getFileNameAndLineNumber(t);if(!r)return;N=r[0];return r[1]}}function getFileNameAndLineNumber(e){var t=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(e);if(t)return[t[1],Number(t[2])];var r=/at ([^ ]+):(\d+):(?:\d+)$/.exec(e);if(r)return[r[1],Number(r[2])];var n=/.*@(.+):(\d+)$/.exec(e);return n?[n[1],Number(n[2])]:void 0}var I=b.EmptyError=function(){(this||t).message="Sequence contains no elements.";Error.call(this||t)};I.prototype=Object.create(Error.prototype);I.prototype.name="EmptyError";var T=b.ObjectDisposedError=function(){(this||t).message="Object has been disposed";Error.call(this||t)};T.prototype=Object.create(Error.prototype);T.prototype.name="ObjectDisposedError";var j=b.ArgumentOutOfRangeError=function(){(this||t).message="Argument out of range";Error.call(this||t)};j.prototype=Object.create(Error.prototype);j.prototype.name="ArgumentOutOfRangeError";var F=b.NotSupportedError=function(e){(this||t).message=e||"This operation is not supported";Error.call(this||t)};F.prototype=Object.create(Error.prototype);F.prototype.name="NotSupportedError";var R=b.NotImplementedError=function(e){(this||t).message=e||"This operation is not implemented";Error.call(this||t)};R.prototype=Object.create(Error.prototype);R.prototype.name="NotImplementedError";var q=b.helpers.notImplemented=function(){throw new R};var L=b.helpers.notSupported=function(){throw new F};var M="function"===typeof Symbol&&Symbol.iterator||"_es6shim_iterator_";f.Set&&"function"===typeof(new f.Set)["@@iterator"]&&(M="@@iterator");var P=b.doneEnumerator={done:true,value:e};var W=b.helpers.isIterable=function(t){return t&&t[M]!==e};var U=b.helpers.isArrayLike=function(t){return t&&t.length!==e};b.helpers.iterator=M;var z=b.internals.bindCallback=function(e,t,r){if("undefined"===typeof t)return e;switch(r){case 0:return function(){return e.call(t)};case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,s){return e.call(t,r,n,s)}}return function(){return e.apply(t,arguments)}};var B=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],V=B.length;var Z="[object Arguments]",H="[object Array]",Q="[object Boolean]",K="[object Date]",G="[object Error]",$="[object Function]",J="[object Map]",X="[object Number]",Y="[object Object]",ee="[object RegExp]",te="[object Set]",re="[object String]",ne="[object WeakMap]";var se="[object ArrayBuffer]",ie="[object Float32Array]",oe="[object Float64Array]",ue="[object Int8Array]",ae="[object Int16Array]",ce="[object Int32Array]",le="[object Uint8Array]",he="[object Uint8ClampedArray]",pe="[object Uint16Array]",fe="[object Uint32Array]";var be={};be[ie]=be[oe]=be[ue]=be[ae]=be[ce]=be[le]=be[he]=be[pe]=be[fe]=true;be[Z]=be[H]=be[se]=be[Q]=be[K]=be[G]=be[$]=be[J]=be[X]=be[Y]=be[ee]=be[te]=be[re]=be[ne]=false;var ve=Object.prototype,de=ve.hasOwnProperty,ye=ve.toString,Oe=Math.pow(2,53)-1;var me=Object.keys||function(){var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),r=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],n=r.length;return function(s){if("object"!==typeof s&&("function"!==typeof s||null===s))throw new TypeError("Object.keys called on non-object");var i=[],o,u;for(o in s)e.call(s,o)&&i.push(o);if(t)for(u=0;u<n;u++)e.call(s,r[u])&&i.push(r[u]);return i}}();function equalObjects(t,r,n,s,i,o){var u=me(t),a=u.length,c=me(r),l=c.length;if(a!==l&&!s)return false;var h=a,p;while(h--){p=u[h];if(!(s?p in r:de.call(r,p)))return false}var f=s;while(++h<a){p=u[h];var b=t[p],v=r[p],d;if(!(d===e?n(b,v,s,i,o):d))return false;f||(f="constructor"===p)}if(!f){var y=t.constructor,O=r.constructor;if(y!==O&&"constructor"in t&&"constructor"in r&&!("function"===typeof y&&y instanceof y&&"function"===typeof O&&O instanceof O))return false}return true}function equalByTag(e,t,r){switch(r){case Q:case K:return+e===+t;case G:return e.name===t.name&&e.message===t.message;case X:return e!==+e?t!==+t:e===+t;case ee:case re:return e===t+""}return false}var _e=b.internals.isObject=function(e){var t=typeof e;return!!e&&("object"===t||"function"===t)};function isObjectLike(e){return!!e&&"object"===typeof e}function isLength(e){return"number"===typeof e&&e>-1&&e%1===0&&e<=Oe}var we=function(){try{Object({toString:0}+"")}catch(e){return function(){return false}}return function(e){return"function"!==typeof e.toString&&"string"===typeof(e+"")}}();function isTypedArray(e){return isObjectLike(e)&&isLength(e.length)&&!!be[ye.call(e)]}var ge=Array.isArray||function(e){return isObjectLike(e)&&isLength(e.length)&&ye.call(e)===H};function arraySome(e,t){var r=-1,n=e.length;while(++r<n)if(t(e[r],r,e))return true;return false}function equalArrays(t,r,n,s,i,o){var u=-1,a=t.length,c=r.length;if(a!==c&&!(s&&c>a))return false;while(++u<a){var l=t[u],h=r[u],p;if(p!==e){if(p)continue;return false}if(s){if(!arraySome(r,(function(e){return l===e||n(l,e,s,i,o)})))return false}else if(!(l===h||n(l,h,s,i,o)))return false}return true}function baseIsEqualDeep(e,t,r,n,s,i){var o=ge(e),u=ge(t),a=H,c=H;if(!o){a=ye.call(e);a===Z?a=Y:a!==Y&&(o=isTypedArray(e))}if(!u){c=ye.call(t);c===Z&&(c=Y)}var l=a===Y&&!we(e),h=c===Y&&!we(t),p=a===c;if(p&&!(o||l))return equalByTag(e,t,a);if(!n){var f=l&&de.call(e,"__wrapped__"),b=h&&de.call(t,"__wrapped__");if(f||b)return r(f?e.value():e,b?t.value():t,n,s,i)}if(!p)return false;s||(s=[]);i||(i=[]);var v=s.length;while(v--)if(s[v]===e)return i[v]===t;s.push(e);i.push(t);var d=(o?equalArrays:equalObjects)(e,t,r,n,s,i);s.pop();i.pop();return d}function baseIsEqual(e,t,r,n,s){return e===t||(null==e||null==t||!_e(e)&&!isObjectLike(t)?e!==e&&t!==t:baseIsEqualDeep(e,t,baseIsEqual,r,n,s))}var Se=b.internals.isEqual=function(e,t){return baseIsEqual(e,t)};var Ce={}.hasOwnProperty,De=Array.prototype.slice;var Ee=b.internals.inherits=function(e,r){function __(){(this||t).constructor=e}__.prototype=r.prototype;e.prototype=new __};var xe=b.internals.addProperties=function(e){for(var t=[],r=1,n=arguments.length;r<n;r++)t.push(arguments[r]);for(var s=0,i=t.length;s<i;s++){var o=t[s];for(var u in o)e[u]=o[u]}};var Ae=b.internals.addRef=function(e,t){return new wn((function(r){return new Pe(t.getDisposable(),e.subscribe(r))}))};function arrayInitialize(e,t){var r=new Array(e);for(var n=0;n<e;n++)r[n]=t();return r}var Ne=b.CompositeDisposable=function(){var e=[],r,n;if(Array.isArray(arguments[0]))e=arguments[0];else{n=arguments.length;e=new Array(n);for(r=0;r<n;r++)e[r]=arguments[r]}(this||t).disposables=e;(this||t).isDisposed=false;(this||t).length=e.length};var ke=Ne.prototype;ke.add=function(e){if((this||t).isDisposed)e.dispose();else{(this||t).disposables.push(e);(this||t).length++}};ke.remove=function(e){var r=false;if(!(this||t).isDisposed){var n=(this||t).disposables.indexOf(e);if(-1!==n){r=true;(this||t).disposables.splice(n,1);(this||t).length--;e.dispose()}}return r};ke.dispose=function(){if(!(this||t).isDisposed){(this||t).isDisposed=true;var e=(this||t).disposables.length,r=new Array(e);for(var n=0;n<e;n++)r[n]=(this||t).disposables[n];(this||t).disposables=[];(this||t).length=0;for(n=0;n<e;n++)r[n].dispose()}};var Ie=b.Disposable=function(e){(this||t).isDisposed=false;(this||t).action=e||v};Ie.prototype.dispose=function(){if(!(this||t).isDisposed){this.action();(this||t).isDisposed=true}};var Te=Ie.create=function(e){return new Ie(e)};var je=Ie.empty={dispose:v};var Fe=Ie.isDisposable=function(e){return e&&S(e.dispose)};var Re=Ie.checkDisposed=function(e){if(e.isDisposed)throw new T};var qe=Ie._fixup=function(e){return Fe(e)?e:je};var Le=b.SingleAssignmentDisposable=function(){(this||t).isDisposed=false;(this||t).current=null};Le.prototype.getDisposable=function(){return(this||t).current};Le.prototype.setDisposable=function(e){if((this||t).current)throw new Error("Disposable has already been assigned");var r=(this||t).isDisposed;!r&&((this||t).current=e);r&&e&&e.dispose()};Le.prototype.dispose=function(){if(!(this||t).isDisposed){(this||t).isDisposed=true;var e=(this||t).current;(this||t).current=null;e&&e.dispose()}};var Me=b.SerialDisposable=function(){(this||t).isDisposed=false;(this||t).current=null};Me.prototype.getDisposable=function(){return(this||t).current};Me.prototype.setDisposable=function(e){var r=(this||t).isDisposed;if(!r){var n=(this||t).current;(this||t).current=e}n&&n.dispose();r&&e&&e.dispose()};Me.prototype.dispose=function(){if(!(this||t).isDisposed){(this||t).isDisposed=true;var e=(this||t).current;(this||t).current=null}e&&e.dispose()};var Pe=b.BinaryDisposable=function(e,r){(this||t)._first=e;(this||t)._second=r;(this||t).isDisposed=false};Pe.prototype.dispose=function(){if(!(this||t).isDisposed){(this||t).isDisposed=true;var e=(this||t)._first;(this||t)._first=null;e&&e.dispose();var r=(this||t)._second;(this||t)._second=null;r&&r.dispose()}};var We=b.NAryDisposable=function(e){(this||t)._disposables=e;(this||t).isDisposed=false};We.prototype.dispose=function(){if(!(this||t).isDisposed){(this||t).isDisposed=true;for(var e=0,r=(this||t)._disposables.length;e<r;e++)(this||t)._disposables[e].dispose();(this||t)._disposables.length=0}};var Ue=b.RefCountDisposable=function(){function InnerDisposable(e){(this||t).disposable=e;(this||t).disposable.count++;(this||t).isInnerDisposed=false}InnerDisposable.prototype.dispose=function(){if(!(this||t).disposable.isDisposed&&!(this||t).isInnerDisposed){(this||t).isInnerDisposed=true;(this||t).disposable.count--;if(0===(this||t).disposable.count&&(this||t).disposable.isPrimaryDisposed){(this||t).disposable.isDisposed=true;(this||t).disposable.underlyingDisposable.dispose()}}};function RefCountDisposable(e){(this||t).underlyingDisposable=e;(this||t).isDisposed=false;(this||t).isPrimaryDisposed=false;(this||t).count=0}RefCountDisposable.prototype.dispose=function(){if(!(this||t).isDisposed&&!(this||t).isPrimaryDisposed){(this||t).isPrimaryDisposed=true;if(0===(this||t).count){(this||t).isDisposed=true;(this||t).underlyingDisposable.dispose()}}};RefCountDisposable.prototype.getDisposable=function(){return(this||t).isDisposed?je:new InnerDisposable(this||t)};return RefCountDisposable}();var ze=b.internals.ScheduledItem=function(e,r,n,s,i){(this||t).scheduler=e;(this||t).state=r;(this||t).action=n;(this||t).dueTime=s;(this||t).comparer=i||m;(this||t).disposable=new Le};ze.prototype.invoke=function(){(this||t).disposable.setDisposable(this.invokeCore())};ze.prototype.compareTo=function(e){return this.comparer((this||t).dueTime,e.dueTime)};ze.prototype.isCancelled=function(){return(this||t).disposable.isDisposed};ze.prototype.invokeCore=function(){return qe(this.action((this||t).scheduler,(this||t).state))};var Be=b.Scheduler=function(){function Scheduler(){}Scheduler.isScheduler=function(e){return e instanceof Scheduler};var e=Scheduler.prototype;e.schedule=function(e,t){throw new R};e.scheduleFuture=function(e,t,r){var n=t;n instanceof Date&&(n-=this.now());n=Scheduler.normalize(n);return 0===n?this.schedule(e,r):this._scheduleFuture(e,n,r)};e._scheduleFuture=function(e,t,r){throw new R};Scheduler.now=y;Scheduler.prototype.now=y;Scheduler.normalize=function(e){e<0&&(e=0);return e};return Scheduler}();var Ve=Be.normalize,Ze=Be.isScheduler;(function(e){function invokeRecImmediate(e,t){var r=t[0],n=t[1],s=new Ne;n(r,innerAction);return s;function innerAction(t){var r=false,i=false;var o=e.schedule(t,scheduleWork);if(!i){s.add(o);r=true}function scheduleWork(e,t){r?s.remove(o):i=true;n(t,innerAction);return je}}}function invokeRecDate(e,t){var r=t[0],n=t[1],s=new Ne;n(r,innerAction);return s;function innerAction(t,r){var i=false,o=false;var u=e.scheduleFuture(t,r,scheduleWork);if(!o){s.add(u);i=true}function scheduleWork(e,t){i?s.remove(u):o=true;n(t,innerAction);return je}}}e.scheduleRecursive=function(e,t){return this.schedule([e,t],invokeRecImmediate)};e.scheduleRecursiveFuture=function(e,t,r){return this.scheduleFuture([e,r],t,invokeRecDate)}})(Be.prototype);(function(e){e.schedulePeriodic=function(e,t,r){if("undefined"===typeof f.setInterval)throw new F;t=Ve(t);var n=e,s=f.setInterval((function(){n=r(n)}),t);return Te((function(){f.clearInterval(s)}))}})(Be.prototype);var He=function(e){Ee(ImmediateScheduler,e);function ImmediateScheduler(){e.call(this||t)}ImmediateScheduler.prototype.schedule=function(e,r){return qe(r(this||t,e))};return ImmediateScheduler}(Be);var Qe=Be.immediate=new He;var Ke=function(e){var r;function runTrampoline(){while(r.length>0){var e=r.dequeue();!e.isCancelled()&&e.invoke()}}Ee(CurrentThreadScheduler,e);function CurrentThreadScheduler(){e.call(this||t)}CurrentThreadScheduler.prototype.schedule=function(e,n){var s=new ze(this||t,e,n,this.now());if(r)r.enqueue(s);else{r=new st(4);r.enqueue(s);var i=D(runTrampoline)();r=null;i===C&&thrower(i.e)}return s.disposable};CurrentThreadScheduler.prototype.scheduleRequired=function(){return!r};return CurrentThreadScheduler}(Be);var Ge=Be.currentThread=new Ke;var $e=b.internals.SchedulePeriodicRecursive=function(){function createTick(e){return function tick(t,r){r(0,e._period);var n=D(e._action)(e._state);if(n===C){e._cancel.dispose();thrower(n.e)}e._state=n}}function SchedulePeriodicRecursive(e,r,n,s){(this||t)._scheduler=e;(this||t)._state=r;(this||t)._period=n;(this||t)._action=s}SchedulePeriodicRecursive.prototype.start=function(){var e=new Le;(this||t)._cancel=e;e.setDisposable((this||t)._scheduler.scheduleRecursiveFuture(0,(this||t)._period,createTick(this||t)));return e};return SchedulePeriodicRecursive}();var Je,Xe;var Ye=function(){var e,t=v;if(!f.setTimeout){if(!f.WScript)throw new F;e=function(e,t){f.WScript.Sleep(t);e()}}else{e=f.setTimeout;t=f.clearTimeout}return{setTimeout:e,clearTimeout:t}}();var et=Ye.setTimeout,tt=Ye.clearTimeout;(function(){var e=1,t={},r=false;Xe=function(e){delete t[e]};function runTask(e){if(r)et((function(){runTask(e)}),0);else{var n=t[e];if(n){r=true;var s=D(n)();Xe(e);r=false;s===C&&thrower(s.e)}}}var n=new RegExp("^"+String(toString).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");var i="function"==typeof(i=a&&h&&a.setImmediate)&&!n.test(i)&&i;function postMessageSupported(){if(!f.postMessage||f.importScripts)return false;var e=false,t=f.onmessage;f.onmessage=function(){e=true};f.postMessage("","*");f.onmessage=t;return e}if(S(i))Je=function(r){var n=e++;t[n]=r;i((function(){runTask(n)}));return n};else if("undefined"!==typeof s&&"[object process]"==={}.toString.call(s))Je=function(r){var n=e++;t[n]=r;s.nextTick((function(){runTask(n)}));return n};else if(postMessageSupported()){var o="ms.rx.schedule"+Math.random();var onGlobalPostMessage=function(e){"string"===typeof e.data&&e.data.substring(0,o.length)===o&&runTask(e.data.substring(o.length))};f.addEventListener("message",onGlobalPostMessage,false);Je=function(r){var n=e++;t[n]=r;f.postMessage(o+n,"*");return n}}else if(!f.MessageChannel)Je="document"in f&&"onreadystatechange"in f.document.createElement("script")?function(r){var n=f.document.createElement("script");var s=e++;t[s]=r;n.onreadystatechange=function(){runTask(s);n.onreadystatechange=null;n.parentNode.removeChild(n);n=null};f.document.documentElement.appendChild(n);return s}:function(r){var n=e++;t[n]=r;et((function(){runTask(n)}),0);return n};else{var u=new f.MessageChannel;u.port1.onmessage=function(e){runTask(e.data)};Je=function(r){var n=e++;t[n]=r;u.port2.postMessage(n);return n}}})();var rt=function(e){Ee(DefaultScheduler,e);function DefaultScheduler(){e.call(this||t)}function scheduleAction(e,t,r,n){return function schedule(){e.setDisposable(Ie._fixup(t(r,n)))}}function ClearDisposable(e){(this||t)._id=e;(this||t).isDisposed=false}ClearDisposable.prototype.dispose=function(){if(!(this||t).isDisposed){(this||t).isDisposed=true;Xe((this||t)._id)}};function LocalClearDisposable(e){(this||t)._id=e;(this||t).isDisposed=false}LocalClearDisposable.prototype.dispose=function(){if(!(this||t).isDisposed){(this||t).isDisposed=true;tt((this||t)._id)}};DefaultScheduler.prototype.schedule=function(e,r){var n=new Le,s=Je(scheduleAction(n,r,this||t,e));return new Pe(n,new ClearDisposable(s))};DefaultScheduler.prototype._scheduleFuture=function(e,r,n){if(0===r)return this.schedule(e,n);var s=new Le,i=et(scheduleAction(s,n,this||t,e),r);return new Pe(s,new LocalClearDisposable(i))};return DefaultScheduler}(Be);var nt=Be["default"]=Be.async=new rt;function IndexedItem(e,r){(this||t).id=e;(this||t).value=r}IndexedItem.prototype.compareTo=function(e){var r=(this||t).value.compareTo(e.value);0===r&&(r=(this||t).id-e.id);return r};var st=b.internals.PriorityQueue=function(e){(this||t).items=new Array(e);(this||t).length=0};var it=st.prototype;it.isHigherPriority=function(e,r){return(this||t).items[e].compareTo((this||t).items[r])<0};it.percolate=function(e){if(!(e>=(this||t).length||e<0)){var r=e-1>>1;if(!(r<0||r===e)&&this.isHigherPriority(e,r)){var n=(this||t).items[e];(this||t).items[e]=(this||t).items[r];(this||t).items[r]=n;this.percolate(r)}}};it.heapify=function(e){+e||(e=0);if(!(e>=(this||t).length||e<0)){var r=2*e+1,n=2*e+2,s=e;r<(this||t).length&&this.isHigherPriority(r,s)&&(s=r);n<(this||t).length&&this.isHigherPriority(n,s)&&(s=n);if(s!==e){var i=(this||t).items[e];(this||t).items[e]=(this||t).items[s];(this||t).items[s]=i;this.heapify(s)}}};it.peek=function(){return(this||t).items[0].value};it.removeAt=function(r){(this||t).items[r]=(this||t).items[--(this||t).length];(this||t).items[(this||t).length]=e;this.heapify()};it.dequeue=function(){var e=this.peek();this.removeAt(0);return e};it.enqueue=function(e){var r=(this||t).length++;(this||t).items[r]=new IndexedItem(st.count++,e);this.percolate(r)};it.remove=function(e){for(var r=0;r<(this||t).length;r++)if((this||t).items[r].value===e){this.removeAt(r);return true}return false};st.count=0;var ot=b.Notification=function(){function Notification(){}Notification.prototype._accept=function(e,t,r){throw new R};Notification.prototype._acceptObserver=function(e,t,r){throw new R};Notification.prototype.accept=function(e,t,r){return e&&"object"===typeof e?this._acceptObserver(e):this._accept(e,t,r)};Notification.prototype.toObservable=function(e){var r=this||t;Ze(e)||(e=Qe);return new wn((function(t){return e.schedule(r,(function(e,r){r._acceptObserver(t);"N"===r.kind&&t.onCompleted()}))}))};return Notification}();var ut=function(e){Ee(OnNextNotification,e);function OnNextNotification(e){(this||t).value=e;(this||t).kind="N"}OnNextNotification.prototype._accept=function(e){return e((this||t).value)};OnNextNotification.prototype._acceptObserver=function(e){return e.onNext((this||t).value)};OnNextNotification.prototype.toString=function(){return"OnNext("+(this||t).value+")"};return OnNextNotification}(ot);var at=function(e){Ee(OnErrorNotification,e);function OnErrorNotification(e){(this||t).error=e;(this||t).kind="E"}OnErrorNotification.prototype._accept=function(e,r){return r((this||t).error)};OnErrorNotification.prototype._acceptObserver=function(e){return e.onError((this||t).error)};OnErrorNotification.prototype.toString=function(){return"OnError("+(this||t).error+")"};return OnErrorNotification}(ot);var ct=function(e){Ee(OnCompletedNotification,e);function OnCompletedNotification(){(this||t).kind="C"}OnCompletedNotification.prototype._accept=function(e,t,r){return r()};OnCompletedNotification.prototype._acceptObserver=function(e){return e.onCompleted()};OnCompletedNotification.prototype.toString=function(){return"OnCompleted()"};return OnCompletedNotification}(ot);var lt=ot.createOnNext=function(e){return new ut(e)};var ht=ot.createOnError=function(e){return new at(e)};var pt=ot.createOnCompleted=function(){return new ct};var ft=b.Observer=function(){};var bt=ft.create=function(e,t,r){e||(e=v);t||(t=w);r||(r=v);return new dt(e,t,r)};var vt=b.internals.AbstractObserver=function(e){Ee(AbstractObserver,e);function AbstractObserver(){(this||t).isStopped=false}AbstractObserver.prototype.next=q;AbstractObserver.prototype.error=q;AbstractObserver.prototype.completed=q;AbstractObserver.prototype.onNext=function(e){!(this||t).isStopped&&this.next(e)};AbstractObserver.prototype.onError=function(e){if(!(this||t).isStopped){(this||t).isStopped=true;this.error(e)}};AbstractObserver.prototype.onCompleted=function(){if(!(this||t).isStopped){(this||t).isStopped=true;this.completed()}};AbstractObserver.prototype.dispose=function(){(this||t).isStopped=true};AbstractObserver.prototype.fail=function(e){if(!(this||t).isStopped){(this||t).isStopped=true;this.error(e);return true}return false};return AbstractObserver}(ft);var dt=b.AnonymousObserver=function(e){Ee(AnonymousObserver,e);function AnonymousObserver(r,n,s){e.call(this||t);(this||t)._onNext=r;(this||t)._onError=n;(this||t)._onCompleted=s}AnonymousObserver.prototype.next=function(e){this._onNext(e)};AnonymousObserver.prototype.error=function(e){this._onError(e)};AnonymousObserver.prototype.completed=function(){this._onCompleted()};return AnonymousObserver}(vt);var yt;var Ot=b.Observable=function(){function makeSubscribe(e,t){return function(r){var n=r.onError;r.onError=function(t){makeStackTraceLong(t,e);n.call(r,t)};return t.call(e,r)}}function Observable(){if(b.config.longStackSupport&&E){var e=(this||t)._subscribe;var r=D(thrower)(new Error).e;(this||t).stack=r.stack.substring(r.stack.indexOf("\n")+1);(this||t)._subscribe=makeSubscribe(this||t,e)}}yt=Observable.prototype;Observable.isObservable=function(e){return e&&S(e.subscribe)};yt.subscribe=yt.forEach=function(e,t,r){return this._subscribe("object"===typeof e?e:bt(e,t,r))};yt.subscribeOnNext=function(e,t){return this._subscribe(bt("undefined"!==typeof t?function(r){e.call(t,r)}:e))};yt.subscribeOnError=function(e,t){return this._subscribe(bt(null,"undefined"!==typeof t?function(r){e.call(t,r)}:e))};yt.subscribeOnCompleted=function(e,t){return this._subscribe(bt(null,null,"undefined"!==typeof t?function(){e.call(t)}:e))};return Observable}();var mt=b.internals.ScheduledObserver=function(e){Ee(ScheduledObserver,e);function ScheduledObserver(r,n){e.call(this||t);(this||t).scheduler=r;(this||t).observer=n;(this||t).isAcquired=false;(this||t).hasFaulted=false;(this||t).queue=[];(this||t).disposable=new Me}function enqueueNext(e,t){return function(){e.onNext(t)}}function enqueueError(e,t){return function(){e.onError(t)}}function enqueueCompleted(e){return function(){e.onCompleted()}}ScheduledObserver.prototype.next=function(e){(this||t).queue.push(enqueueNext((this||t).observer,e))};ScheduledObserver.prototype.error=function(e){(this||t).queue.push(enqueueError((this||t).observer,e))};ScheduledObserver.prototype.completed=function(){(this||t).queue.push(enqueueCompleted((this||t).observer))};function scheduleMethod(e,t){var r;if(e.queue.length>0){r=e.queue.shift();var n=D(r)();if(n===C){e.queue=[];e.hasFaulted=true;return thrower(n.e)}t(e)}else e.isAcquired=false}ScheduledObserver.prototype.ensureActive=function(){var e=false;if(!(this||t).hasFaulted&&(this||t).queue.length>0){e=!(this||t).isAcquired;(this||t).isAcquired=true}e&&(this||t).disposable.setDisposable((this||t).scheduler.scheduleRecursive(this||t,scheduleMethod))};ScheduledObserver.prototype.dispose=function(){e.prototype.dispose.call(this||t);(this||t).disposable.dispose()};return ScheduledObserver}(vt);var _t=b.ObservableBase=function(e){Ee(ObservableBase,e);function fixSubscriber(e){return e&&S(e.dispose)?e:S(e)?Te(e):je}function setDisposable(e,t){var r=t[0],n=t[1];var s=D(n.subscribeCore).call(n,r);s!==C||r.fail(C.e)||thrower(C.e);r.setDisposable(fixSubscriber(s))}function ObservableBase(){e.call(this||t)}ObservableBase.prototype._subscribe=function(e){var r=new gn(e),n=[r,this||t];Ge.scheduleRequired()?Ge.schedule(n,setDisposable):setDisposable(null,n);return r};ObservableBase.prototype.subscribeCore=q;return ObservableBase}(Ot);var wt=b.FlatMapObservable=function(e){Ee(FlatMapObservable,e);function FlatMapObservable(r,n,s,i){(this||t).resultSelector=S(s)?s:null;(this||t).selector=z(S(n)?n:function(){return n},i,3);(this||t).source=r;e.call(this||t)}FlatMapObservable.prototype.subscribeCore=function(e){return(this||t).source.subscribe(new InnerObserver(e,(this||t).selector,(this||t).resultSelector,this||t))};Ee(InnerObserver,vt);function InnerObserver(e,r,n,s){(this||t).i=0;(this||t).selector=r;(this||t).resultSelector=n;(this||t).source=s;(this||t).o=e;vt.call(this||t)}InnerObserver.prototype._wrapResult=function(e,r,n){return(this||t).resultSelector?e.map((function(e,t){return this.resultSelector(r,e,n,t)}),this||t):e};InnerObserver.prototype.next=function(e){var r=(this||t).i++;var n=D((this||t).selector)(e,r,(this||t).source);if(n===C)return(this||t).o.onError(n.e);g(n)&&(n=en(n));(U(n)||W(n))&&(n=Ot.from(n));(this||t).o.onNext(this._wrapResult(n,e,r))};InnerObserver.prototype.error=function(e){(this||t).o.onError(e)};InnerObserver.prototype.completed=function(){(this||t).o.onCompleted()};return FlatMapObservable}(_t);var gt=b.internals.Enumerable=function(){};function IsDisposedDisposable(e){(this||t)._s=e;(this||t).isDisposed=false}IsDisposedDisposable.prototype.dispose=function(){if(!(this||t).isDisposed){(this||t).isDisposed=true;(this||t)._s.isDisposed=true}};var St=function(e){Ee(ConcatEnumerableObservable,e);function ConcatEnumerableObservable(r){(this||t).sources=r;e.call(this||t)}function scheduleMethod(e,t){if(!e.isDisposed){var r=D(e.e.next).call(e.e);if(r===C)return e.o.onError(r.e);if(r.done)return e.o.onCompleted();var n=r.value;g(n)&&(n=en(n));var s=new Le;e.subscription.setDisposable(s);s.setDisposable(n.subscribe(new InnerObserver(e,t)))}}ConcatEnumerableObservable.prototype.subscribeCore=function(e){var r=new Me;var n={isDisposed:false,o:e,subscription:r,e:(this||t).sources[M]()};var s=Ge.scheduleRecursive(n,scheduleMethod);return new We([r,s,new IsDisposedDisposable(n)])};function InnerObserver(e,r){(this||t)._state=e;(this||t)._recurse=r;vt.call(this||t)}Ee(InnerObserver,vt);InnerObserver.prototype.next=function(e){(this||t)._state.o.onNext(e)};InnerObserver.prototype.error=function(e){(this||t)._state.o.onError(e)};InnerObserver.prototype.completed=function(){this._recurse((this||t)._state)};return ConcatEnumerableObservable}(_t);gt.prototype.concat=function(){return new St(this||t)};var Ct=function(e){function CatchErrorObservable(r){(this||t).sources=r;e.call(this||t)}Ee(CatchErrorObservable,e);function scheduleMethod(e,t){if(!e.isDisposed){var r=D(e.e.next).call(e.e);if(r===C)return e.o.onError(r.e);if(r.done)return null!==e.lastError?e.o.onError(e.lastError):e.o.onCompleted();var n=r.value;g(n)&&(n=en(n));var s=new Le;e.subscription.setDisposable(s);s.setDisposable(n.subscribe(new InnerObserver(e,t)))}}CatchErrorObservable.prototype.subscribeCore=function(e){var r=new Me;var n={isDisposed:false,e:(this||t).sources[M](),subscription:r,lastError:null,o:e};var s=Ge.scheduleRecursive(n,scheduleMethod);return new We([r,s,new IsDisposedDisposable(n)])};function InnerObserver(e,r){(this||t)._state=e;(this||t)._recurse=r;vt.call(this||t)}Ee(InnerObserver,vt);InnerObserver.prototype.next=function(e){(this||t)._state.o.onNext(e)};InnerObserver.prototype.error=function(e){(this||t)._state.lastError=e;this._recurse((this||t)._state)};InnerObserver.prototype.completed=function(){(this||t)._state.o.onCompleted()};return CatchErrorObservable}(_t);gt.prototype.catchError=function(){return new Ct(this||t)};var Dt=function(e){Ee(RepeatEnumerable,e);function RepeatEnumerable(e,r){(this||t).v=e;(this||t).c=null==r?-1:r}RepeatEnumerable.prototype[M]=function(){return new RepeatEnumerator(this||t)};function RepeatEnumerator(e){(this||t).v=e.v;(this||t).l=e.c}RepeatEnumerator.prototype.next=function(){if(0===(this||t).l)return P;(this||t).l>0&&(this||t).l--;return{done:false,value:(this||t).v}};return RepeatEnumerable}(gt);var Et=gt.repeat=function(e,t){return new Dt(e,t)};var xt=function(e){Ee(OfEnumerable,e);function OfEnumerable(e,r,n){(this||t).s=e;(this||t).fn=r?z(r,n,3):null}OfEnumerable.prototype[M]=function(){return new OfEnumerator(this||t)};function OfEnumerator(e){(this||t).i=-1;(this||t).s=e.s;(this||t).l=(this||t).s.length;(this||t).fn=e.fn}OfEnumerator.prototype.next=function(){return++(this||t).i<(this||t).l?{done:false,value:(this||t).fn?this.fn((this||t).s[(this||t).i],(this||t).i,(this||t).s):(this||t).s[(this||t).i]}:P};return OfEnumerable}(gt);var At=gt.of=function(e,t,r){return new xt(e,t,r)};var Nt=function(e){Ee(ToArrayObservable,e);function ToArrayObservable(r){(this||t).source=r;e.call(this||t)}ToArrayObservable.prototype.subscribeCore=function(e){return(this||t).source.subscribe(new InnerObserver(e))};Ee(InnerObserver,vt);function InnerObserver(e){(this||t).o=e;(this||t).a=[];vt.call(this||t)}InnerObserver.prototype.next=function(e){(this||t).a.push(e)};InnerObserver.prototype.error=function(e){(this||t).o.onError(e)};InnerObserver.prototype.completed=function(){(this||t).o.onNext((this||t).a);(this||t).o.onCompleted()};return ToArrayObservable}(_t);yt.toArray=function(){return new Nt(this||t)};Ot.create=function(e,t){return new wn(e,t)};var kt=function(e){Ee(Defer,e);function Defer(r){(this||t)._f=r;e.call(this||t)}Defer.prototype.subscribeCore=function(e){var r=D((this||t)._f)();if(r===C)return Gt(r.e).subscribe(e);g(r)&&(r=en(r));return r.subscribe(e)};return Defer}(_t);var It=Ot.defer=function(e){return new kt(e)};var Tt=function(e){Ee(EmptyObservable,e);function EmptyObservable(r){(this||t).scheduler=r;e.call(this||t)}EmptyObservable.prototype.subscribeCore=function(e){var r=new EmptySink(e,(this||t).scheduler);return r.run()};function EmptySink(e,r){(this||t).observer=e;(this||t).scheduler=r}function scheduleItem(e,t){t.onCompleted();return je}EmptySink.prototype.run=function(){var e=(this||t).observer;return(this||t).scheduler===Qe?scheduleItem(null,e):(this||t).scheduler.schedule(e,scheduleItem)};return EmptyObservable}(_t);var jt=new Tt(Qe);var Ft=Ot.empty=function(e){Ze(e)||(e=Qe);return e===Qe?jt:new Tt(e)};var Rt=function(e){Ee(FromObservable,e);function FromObservable(r,n,s){(this||t)._iterable=r;(this||t)._fn=n;(this||t)._scheduler=s;e.call(this||t)}function createScheduleMethod(e,t,r){return function loopRecursive(n,s){var i=D(t.next).call(t);if(i===C)return e.onError(i.e);if(i.done)return e.onCompleted();var o=i.value;if(S(r)){o=D(r)(o,n);if(o===C)return e.onError(o.e)}e.onNext(o);s(n+1)}}FromObservable.prototype.subscribeCore=function(e){var r=Object((this||t)._iterable),n=getIterable(r);return(this||t)._scheduler.scheduleRecursive(0,createScheduleMethod(e,n,(this||t)._fn))};return FromObservable}(_t);var qt=Math.pow(2,53)-1;function StringIterable(e){(this||t)._s=e}StringIterable.prototype[M]=function(){return new StringIterator((this||t)._s)};function StringIterator(e){(this||t)._s=e;(this||t)._l=e.length;(this||t)._i=0}StringIterator.prototype[M]=function(){return this||t};StringIterator.prototype.next=function(){return(this||t)._i<(this||t)._l?{done:false,value:(this||t)._s.charAt((this||t)._i++)}:P};function ArrayIterable(e){(this||t)._a=e}ArrayIterable.prototype[M]=function(){return new ArrayIterator((this||t)._a)};function ArrayIterator(e){(this||t)._a=e;(this||t)._l=toLength(e);(this||t)._i=0}ArrayIterator.prototype[M]=function(){return this||t};ArrayIterator.prototype.next=function(){return(this||t)._i<(this||t)._l?{done:false,value:(this||t)._a[(this||t)._i++]}:P};function numberIsFinite(e){return"number"===typeof e&&f.isFinite(e)}function isNan(e){return e!==e}function getIterable(t){var r=t[M],n;if(!r&&"string"===typeof t){n=new StringIterable(t);return n[M]()}if(!r&&t.length!==e){n=new ArrayIterable(t);return n[M]()}if(!r)throw new TypeError("Object is not iterable");return t[M]()}function sign(e){var t=+e;return 0===t||isNaN(t)?t:t<0?-1:1}function toLength(e){var t=+e.length;if(isNaN(t))return 0;if(0===t||!numberIsFinite(t))return t;t=sign(t)*Math.floor(Math.abs(t));return t<=0?0:t>qt?qt:t}var Lt=Ot.from=function(e,t,r,n){if(null==e)throw new Error("iterable cannot be null.");if(t&&!S(t))throw new Error("mapFn when provided must be a function");if(t)var s=z(t,r,2);Ze(n)||(n=Ge);return new Rt(e,s,n)};var Mt=function(e){Ee(FromArrayObservable,e);function FromArrayObservable(r,n){(this||t)._args=r;(this||t)._scheduler=n;e.call(this||t)}function scheduleMethod(e,t){var r=t.length;return function loopRecursive(n,s){if(n<r){e.onNext(t[n]);s(n+1)}else e.onCompleted()}}FromArrayObservable.prototype.subscribeCore=function(e){return(this||t)._scheduler.scheduleRecursive(0,scheduleMethod(e,(this||t)._args))};return FromArrayObservable}(_t);var Pt=Ot.fromArray=function(e,t){Ze(t)||(t=Ge);return new Mt(e,t)};var Wt=function(e){Ee(NeverObservable,e);function NeverObservable(){e.call(this||t)}NeverObservable.prototype.subscribeCore=function(e){return je};return NeverObservable}(_t);var Ut=new Wt;var zt=Ot.never=function(){return Ut};function observableOf(e,t){Ze(e)||(e=Ge);return new Mt(t,e)}Ot.of=function(){var e=arguments.length,t=new Array(e);for(var r=0;r<e;r++)t[r]=arguments[r];return new Mt(t,Ge)};Ot.ofWithScheduler=function(e){var t=arguments.length,r=new Array(t-1);for(var n=1;n<t;n++)r[n-1]=arguments[n];return new Mt(r,e)};var Bt=function(e){Ee(PairsObservable,e);function PairsObservable(r,n){(this||t)._o=r;(this||t)._keys=Object.keys(r);(this||t)._scheduler=n;e.call(this||t)}function scheduleMethod(e,t,r){return function loopRecursive(n,s){if(n<r.length){var i=r[n];e.onNext([i,t[i]]);s(n+1)}else e.onCompleted()}}PairsObservable.prototype.subscribeCore=function(e){return(this||t)._scheduler.scheduleRecursive(0,scheduleMethod(e,(this||t)._o,(this||t)._keys))};return PairsObservable}(_t);Ot.pairs=function(e,t){t||(t=Ge);return new Bt(e,t)};var Vt=function(e){Ee(RangeObservable,e);function RangeObservable(r,n,s){(this||t).start=r;(this||t).rangeCount=n;(this||t).scheduler=s;e.call(this||t)}function loopRecursive(e,t,r){return function loop(n,s){if(n<t){r.onNext(e+n);s(n+1)}else r.onCompleted()}}RangeObservable.prototype.subscribeCore=function(e){return(this||t).scheduler.scheduleRecursive(0,loopRecursive((this||t).start,(this||t).rangeCount,e))};return RangeObservable}(_t);Ot.range=function(e,t,r){Ze(r)||(r=Ge);return new Vt(e,t,r)};var Zt=function(e){Ee(RepeatObservable,e);function RepeatObservable(r,n,s){(this||t).value=r;(this||t).repeatCount=null==n?-1:n;(this||t).scheduler=s;e.call(this||t)}RepeatObservable.prototype.subscribeCore=function(e){var r=new RepeatSink(e,this||t);return r.run()};return RepeatObservable}(_t);function RepeatSink(e,r){(this||t).observer=e;(this||t).parent=r}RepeatSink.prototype.run=function(){var e=(this||t).observer,r=(this||t).parent.value;function loopRecursive(t,n){if(-1===t||t>0){e.onNext(r);t>0&&t--}if(0===t)return e.onCompleted();n(t)}return(this||t).parent.scheduler.scheduleRecursive((this||t).parent.repeatCount,loopRecursive)};Ot.repeat=function(e,t,r){Ze(r)||(r=Ge);return new Zt(e,t,r)};var Ht=function(e){Ee(JustObservable,e);function JustObservable(r,n){(this||t)._value=r;(this||t)._scheduler=n;e.call(this||t)}JustObservable.prototype.subscribeCore=function(e){var r=[(this||t)._value,e];return(this||t)._scheduler===Qe?scheduleItem(null,r):(this||t)._scheduler.schedule(r,scheduleItem)};function scheduleItem(e,t){var r=t[0],n=t[1];n.onNext(r);n.onCompleted();return je}return JustObservable}(_t);var Qt=Ot["return"]=Ot.just=function(e,t){Ze(t)||(t=Qe);return new Ht(e,t)};var Kt=function(e){Ee(ThrowObservable,e);function ThrowObservable(r,n){(this||t)._error=r;(this||t)._scheduler=n;e.call(this||t)}ThrowObservable.prototype.subscribeCore=function(e){var r=[(this||t)._error,e];return(this||t)._scheduler===Qe?scheduleItem(null,r):(this||t)._scheduler.schedule(r,scheduleItem)};function scheduleItem(e,t){var r=t[0],n=t[1];n.onError(r);return je}return ThrowObservable}(_t);var Gt=Ot["throw"]=function(e,t){Ze(t)||(t=Qe);return new Kt(e,t)};var $t=function(e){Ee(CatchObservable,e);function CatchObservable(r,n){(this||t).source=r;(this||t)._fn=n;e.call(this||t)}CatchObservable.prototype.subscribeCore=function(e){var r=new Le,n=new Me;n.setDisposable(r);r.setDisposable((this||t).source.subscribe(new Jt(e,n,(this||t)._fn)));return n};return CatchObservable}(_t);var Jt=function(e){Ee(CatchObserver,e);function CatchObserver(r,n,s){(this||t)._o=r;(this||t)._s=n;(this||t)._fn=s;e.call(this||t)}CatchObserver.prototype.next=function(e){(this||t)._o.onNext(e)};CatchObserver.prototype.completed=function(){return(this||t)._o.onCompleted()};CatchObserver.prototype.error=function(e){var r=D((this||t)._fn)(e);if(r===C)return(this||t)._o.onError(r.e);g(r)&&(r=en(r));var n=new Le;(this||t)._s.setDisposable(n);n.setDisposable(r.subscribe((this||t)._o))};return CatchObserver}(vt);yt["catch"]=function(e){return S(e)?new $t(this||t,e):Xt([this||t,e])};var Xt=Ot["catch"]=function(){var e;if(Array.isArray(arguments[0]))e=arguments[0];else{var t=arguments.length;e=new Array(t);for(var r=0;r<t;r++)e[r]=arguments[r]}return At(e).catchError()};yt.combineLatest=function(){var e=arguments.length,r=new Array(e);for(var n=0;n<e;n++)r[n]=arguments[n];Array.isArray(r[0])?r[0].unshift(this||t):r.unshift(this||t);return tr.apply(this||t,r)};var Yt=function(e){Ee(CombineLatestObservable,e);function CombineLatestObservable(r,n){(this||t)._params=r;(this||t)._cb=n;e.call(this||t)}CombineLatestObservable.prototype.subscribeCore=function(e){var r=(this||t)._params.length,n=new Array(r);var s={hasValue:arrayInitialize(r,falseFactory),hasValueAll:false,isDone:arrayInitialize(r,falseFactory),values:new Array(r)};for(var i=0;i<r;i++){var o=(this||t)._params[i],u=new Le;n[i]=u;g(o)&&(o=en(o));u.setDisposable(o.subscribe(new er(e,i,(this||t)._cb,s)))}return new We(n)};return CombineLatestObservable}(_t);var er=function(e){Ee(CombineLatestObserver,e);function CombineLatestObserver(r,n,s,i){(this||t)._o=r;(this||t)._i=n;(this||t)._cb=s;(this||t)._state=i;e.call(this||t)}function notTheSame(e){return function(t,r){return r!==e}}CombineLatestObserver.prototype.next=function(e){(this||t)._state.values[(this||t)._i]=e;(this||t)._state.hasValue[(this||t)._i]=true;if((this||t)._state.hasValueAll||((this||t)._state.hasValueAll=(this||t)._state.hasValue.every(d))){var r=D((this||t)._cb).apply(null,(this||t)._state.values);if(r===C)return(this||t)._o.onError(r.e);(this||t)._o.onNext(r)}else(this||t)._state.isDone.filter(notTheSame((this||t)._i)).every(d)&&(this||t)._o.onCompleted()};CombineLatestObserver.prototype.error=function(e){(this||t)._o.onError(e)};CombineLatestObserver.prototype.completed=function(){(this||t)._state.isDone[(this||t)._i]=true;(this||t)._state.isDone.every(d)&&(this||t)._o.onCompleted()};return CombineLatestObserver}(vt);var tr=Ot.combineLatest=function(){var e=arguments.length,t=new Array(e);for(var r=0;r<e;r++)t[r]=arguments[r];var n=S(t[e-1])?t.pop():argumentsToArray;Array.isArray(t[0])&&(t=t[0]);return new Yt(t,n)};yt.concat=function(){for(var e=[],r=0,n=arguments.length;r<n;r++)e.push(arguments[r]);e.unshift(this||t);return sr.apply(null,e)};var rr=function(e){Ee(ConcatObserver,e);function ConcatObserver(r,n){(this||t)._s=r;(this||t)._fn=n;e.call(this||t)}ConcatObserver.prototype.next=function(e){(this||t)._s.o.onNext(e)};ConcatObserver.prototype.error=function(e){(this||t)._s.o.onError(e)};ConcatObserver.prototype.completed=function(){(this||t)._s.i++;this._fn((this||t)._s)};return ConcatObserver}(vt);var nr=function(e){Ee(ConcatObservable,e);function ConcatObservable(r){(this||t)._sources=r;e.call(this||t)}function scheduleRecursive(e,t){if(!e.disposable.isDisposed){if(e.i===e.sources.length)return e.o.onCompleted();var r=e.sources[e.i];g(r)&&(r=en(r));var n=new Le;e.subscription.setDisposable(n);n.setDisposable(r.subscribe(new rr(e,t)))}}ConcatObservable.prototype.subscribeCore=function(e){var r=new Me;var n=Te(v);var s={o:e,i:0,subscription:r,disposable:n,sources:(this||t)._sources};var i=Qe.scheduleRecursive(s,scheduleRecursive);return new We([r,n,i])};return ConcatObservable}(_t);var sr=Ot.concat=function(){var e;if(Array.isArray(arguments[0]))e=arguments[0];else{e=new Array(arguments.length);for(var t=0,r=arguments.length;t<r;t++)e[t]=arguments[t]}return new nr(e)};yt.concatAll=function(){return this.merge(1)};var ir=function(e){Ee(MergeObservable,e);function MergeObservable(r,n){(this||t).source=r;(this||t).maxConcurrent=n;e.call(this||t)}MergeObservable.prototype.subscribeCore=function(e){var r=new Ne;r.add((this||t).source.subscribe(new or(e,(this||t).maxConcurrent,r)));return r};return MergeObservable}(_t);var or=function(e){function MergeObserver(r,n,s){(this||t).o=r;(this||t).max=n;(this||t).g=s;(this||t).done=false;(this||t).q=[];(this||t).activeCount=0;e.call(this||t)}Ee(MergeObserver,e);MergeObserver.prototype.handleSubscribe=function(e){var r=new Le;(this||t).g.add(r);g(e)&&(e=en(e));r.setDisposable(e.subscribe(new InnerObserver(this||t,r)))};MergeObserver.prototype.next=function(e){if((this||t).activeCount<(this||t).max){(this||t).activeCount++;this.handleSubscribe(e)}else(this||t).q.push(e)};MergeObserver.prototype.error=function(e){(this||t).o.onError(e)};MergeObserver.prototype.completed=function(){(this||t).done=true;0===(this||t).activeCount&&(this||t).o.onCompleted()};function InnerObserver(r,n){(this||t).parent=r;(this||t).sad=n;e.call(this||t)}Ee(InnerObserver,e);InnerObserver.prototype.next=function(e){(this||t).parent.o.onNext(e)};InnerObserver.prototype.error=function(e){(this||t).parent.o.onError(e)};InnerObserver.prototype.completed=function(){(this||t).parent.g.remove((this||t).sad);if((this||t).parent.q.length>0)(this||t).parent.handleSubscribe((this||t).parent.q.shift());else{(this||t).parent.activeCount--;(this||t).parent.done&&0===(this||t).parent.activeCount&&(this||t).parent.o.onCompleted()}};return MergeObserver}(vt);yt.merge=function(e){return"number"!==typeof e?ur(this||t,e):new ir(this||t,e)};var ur=Ot.merge=function(){var e,t=[],r,n=arguments.length;if(arguments[0])if(Ze(arguments[0])){e=arguments[0];for(r=1;r<n;r++)t.push(arguments[r])}else{e=Qe;for(r=0;r<n;r++)t.push(arguments[r])}else{e=Qe;for(r=1;r<n;r++)t.push(arguments[r])}Array.isArray(t[0])&&(t=t[0]);return observableOf(e,t).mergeAll()};var ar=b.CompositeError=function(e){(this||t).innerErrors=e;(this||t).message="This contains multiple errors. Check the innerErrors";Error.call(this||t)};ar.prototype=Object.create(Error.prototype);ar.prototype.name="CompositeError";var cr=function(e){Ee(MergeDelayErrorObservable,e);function MergeDelayErrorObservable(r){(this||t).source=r;e.call(this||t)}MergeDelayErrorObservable.prototype.subscribeCore=function(e){var r=new Ne,n=new Le,s={isStopped:false,errors:[],o:e};r.add(n);n.setDisposable((this||t).source.subscribe(new lr(r,s)));return r};return MergeDelayErrorObservable}(_t);var lr=function(e){Ee(MergeDelayErrorObserver,e);function MergeDelayErrorObserver(r,n){(this||t)._group=r;(this||t)._state=n;e.call(this||t)}function setCompletion(e,t){0===t.length?e.onCompleted():1===t.length?e.onError(t[0]):e.onError(new ar(t))}MergeDelayErrorObserver.prototype.next=function(e){var r=new Le;(this||t)._group.add(r);g(e)&&(e=en(e));r.setDisposable(e.subscribe(new InnerObserver(r,(this||t)._group,(this||t)._state)))};MergeDelayErrorObserver.prototype.error=function(e){(this||t)._state.errors.push(e);(this||t)._state.isStopped=true;1===(this||t)._group.length&&setCompletion((this||t)._state.o,(this||t)._state.errors)};MergeDelayErrorObserver.prototype.completed=function(){(this||t)._state.isStopped=true;1===(this||t)._group.length&&setCompletion((this||t)._state.o,(this||t)._state.errors)};Ee(InnerObserver,e);function InnerObserver(r,n,s){(this||t)._inner=r;(this||t)._group=n;(this||t)._state=s;e.call(this||t)}InnerObserver.prototype.next=function(e){(this||t)._state.o.onNext(e)};InnerObserver.prototype.error=function(e){(this||t)._state.errors.push(e);(this||t)._group.remove((this||t)._inner);(this||t)._state.isStopped&&1===(this||t)._group.length&&setCompletion((this||t)._state.o,(this||t)._state.errors)};InnerObserver.prototype.completed=function(){(this||t)._group.remove((this||t)._inner);(this||t)._state.isStopped&&1===(this||t)._group.length&&setCompletion((this||t)._state.o,(this||t)._state.errors)};return MergeDelayErrorObserver}(vt);Ot.mergeDelayError=function(){var e;if(Array.isArray(arguments[0]))e=arguments[0];else{var t=arguments.length;e=new Array(t);for(var r=0;r<t;r++)e[r]=arguments[r]}var n=observableOf(null,e);return new cr(n)};var hr=function(e){Ee(MergeAllObservable,e);function MergeAllObservable(r){(this||t).source=r;e.call(this||t)}MergeAllObservable.prototype.subscribeCore=function(e){var r=new Ne,n=new Le;r.add(n);n.setDisposable((this||t).source.subscribe(new pr(e,r)));return r};return MergeAllObservable}(_t);var pr=function(e){function MergeAllObserver(r,n){(this||t).o=r;(this||t).g=n;(this||t).done=false;e.call(this||t)}Ee(MergeAllObserver,e);MergeAllObserver.prototype.next=function(e){var r=new Le;(this||t).g.add(r);g(e)&&(e=en(e));r.setDisposable(e.subscribe(new InnerObserver(this||t,r)))};MergeAllObserver.prototype.error=function(e){(this||t).o.onError(e)};MergeAllObserver.prototype.completed=function(){(this||t).done=true;1===(this||t).g.length&&(this||t).o.onCompleted()};function InnerObserver(r,n){(this||t).parent=r;(this||t).sad=n;e.call(this||t)}Ee(InnerObserver,e);InnerObserver.prototype.next=function(e){(this||t).parent.o.onNext(e)};InnerObserver.prototype.error=function(e){(this||t).parent.o.onError(e)};InnerObserver.prototype.completed=function(){(this||t).parent.g.remove((this||t).sad);(this||t).parent.done&&1===(this||t).parent.g.length&&(this||t).parent.o.onCompleted()};return MergeAllObserver}(vt);yt.mergeAll=function(){return new hr(this||t)};var fr=function(e){Ee(SkipUntilObservable,e);function SkipUntilObservable(r,n){(this||t)._s=r;(this||t)._o=g(n)?en(n):n;(this||t)._open=false;e.call(this||t)}SkipUntilObservable.prototype.subscribeCore=function(e){var r=new Le;r.setDisposable((this||t)._s.subscribe(new br(e,this||t)));g((this||t)._o)&&((this||t)._o=en((this||t)._o));var n=new Le;n.setDisposable((this||t)._o.subscribe(new vr(e,this||t,n)));return new Pe(r,n)};return SkipUntilObservable}(_t);var br=function(e){Ee(SkipUntilSourceObserver,e);function SkipUntilSourceObserver(r,n){(this||t)._o=r;(this||t)._p=n;e.call(this||t)}SkipUntilSourceObserver.prototype.next=function(e){(this||t)._p._open&&(this||t)._o.onNext(e)};SkipUntilSourceObserver.prototype.error=function(e){(this||t)._o.onError(e)};SkipUntilSourceObserver.prototype.onCompleted=function(){(this||t)._p._open&&(this||t)._o.onCompleted()};return SkipUntilSourceObserver}(vt);var vr=function(e){Ee(SkipUntilOtherObserver,e);function SkipUntilOtherObserver(r,n,s){(this||t)._o=r;(this||t)._p=n;(this||t)._r=s;e.call(this||t)}SkipUntilOtherObserver.prototype.next=function(){(this||t)._p._open=true;(this||t)._r.dispose()};SkipUntilOtherObserver.prototype.error=function(e){(this||t)._o.onError(e)};SkipUntilOtherObserver.prototype.onCompleted=function(){(this||t)._r.dispose()};return SkipUntilOtherObserver}(vt);yt.skipUntil=function(e){return new fr(this||t,e)};var dr=function(e){Ee(SwitchObservable,e);function SwitchObservable(r){(this||t).source=r;e.call(this||t)}SwitchObservable.prototype.subscribeCore=function(e){var r=new Me,n=(this||t).source.subscribe(new SwitchObserver(e,r));return new Pe(n,r)};Ee(SwitchObserver,vt);function SwitchObserver(e,r){(this||t).o=e;(this||t).inner=r;(this||t).stopped=false;(this||t).latest=0;(this||t).hasLatest=false;vt.call(this||t)}SwitchObserver.prototype.next=function(e){var r=new Le,n=++(this||t).latest;(this||t).hasLatest=true;(this||t).inner.setDisposable(r);g(e)&&(e=en(e));r.setDisposable(e.subscribe(new InnerObserver(this||t,n)))};SwitchObserver.prototype.error=function(e){(this||t).o.onError(e)};SwitchObserver.prototype.completed=function(){(this||t).stopped=true;!(this||t).hasLatest&&(this||t).o.onCompleted()};Ee(InnerObserver,vt);function InnerObserver(e,r){(this||t).parent=e;(this||t).id=r;vt.call(this||t)}InnerObserver.prototype.next=function(e){(this||t).parent.latest===(this||t).id&&(this||t).parent.o.onNext(e)};InnerObserver.prototype.error=function(e){(this||t).parent.latest===(this||t).id&&(this||t).parent.o.onError(e)};InnerObserver.prototype.completed=function(){if((this||t).parent.latest===(this||t).id){(this||t).parent.hasLatest=false;(this||t).parent.stopped&&(this||t).parent.o.onCompleted()}};return SwitchObservable}(_t);yt["switch"]=yt.switchLatest=function(){return new dr(this||t)};var yr=function(e){Ee(TakeUntilObservable,e);function TakeUntilObservable(r,n){(this||t).source=r;(this||t).other=g(n)?en(n):n;e.call(this||t)}TakeUntilObservable.prototype.subscribeCore=function(e){return new Pe((this||t).source.subscribe(e),(this||t).other.subscribe(new Or(e)))};return TakeUntilObservable}(_t);var Or=function(e){Ee(TakeUntilObserver,e);function TakeUntilObserver(r){(this||t)._o=r;e.call(this||t)}TakeUntilObserver.prototype.next=function(){(this||t)._o.onCompleted()};TakeUntilObserver.prototype.error=function(e){(this||t)._o.onError(e)};TakeUntilObserver.prototype.onCompleted=v;return TakeUntilObserver}(vt);yt.takeUntil=function(e){return new yr(this||t,e)};var mr=function(e){Ee(WithLatestFromObservable,e);function WithLatestFromObservable(r,n,s){(this||t)._s=r;(this||t)._ss=n;(this||t)._cb=s;e.call(this||t)}WithLatestFromObservable.prototype.subscribeCore=function(e){var r=(this||t)._ss.length;var n={hasValue:arrayInitialize(r,falseFactory),hasValueAll:false,values:new Array(r)};var s=(this||t)._ss.length,i=new Array(s+1);for(var o=0;o<s;o++){var u=(this||t)._ss[o],a=new Le;g(u)&&(u=en(u));a.setDisposable(u.subscribe(new _r(e,o,n)));i[o]=a}var c=new Le;c.setDisposable((this||t)._s.subscribe(new wr(e,(this||t)._cb,n)));i[s]=c;return new We(i)};return WithLatestFromObservable}(_t);var _r=function(e){Ee(WithLatestFromOtherObserver,e);function WithLatestFromOtherObserver(r,n,s){(this||t)._o=r;(this||t)._i=n;(this||t)._state=s;e.call(this||t)}WithLatestFromOtherObserver.prototype.next=function(e){(this||t)._state.values[(this||t)._i]=e;(this||t)._state.hasValue[(this||t)._i]=true;(this||t)._state.hasValueAll=(this||t)._state.hasValue.every(d)};WithLatestFromOtherObserver.prototype.error=function(e){(this||t)._o.onError(e)};WithLatestFromOtherObserver.prototype.completed=v;return WithLatestFromOtherObserver}(vt);var wr=function(e){Ee(WithLatestFromSourceObserver,e);function WithLatestFromSourceObserver(r,n,s){(this||t)._o=r;(this||t)._cb=n;(this||t)._state=s;e.call(this||t)}WithLatestFromSourceObserver.prototype.next=function(e){var r=[e].concat((this||t)._state.values);if((this||t)._state.hasValueAll){var n=D((this||t)._cb).apply(null,r);if(n===C)return(this||t)._o.onError(n.e);(this||t)._o.onNext(n)}};WithLatestFromSourceObserver.prototype.error=function(e){(this||t)._o.onError(e)};WithLatestFromSourceObserver.prototype.completed=function(){(this||t)._o.onCompleted()};return WithLatestFromSourceObserver}(vt);yt.withLatestFrom=function(){if(0===arguments.length)throw new Error("invalid arguments");var e=arguments.length,r=new Array(e);for(var n=0;n<e;n++)r[n]=arguments[n];var s=S(r[e-1])?r.pop():argumentsToArray;Array.isArray(r[0])&&(r=r[0]);return new mr(this||t,r,s)};var gr=function(e){Ee(ZipObservable,e);function ZipObservable(r,n){(this||t)._s=r;(this||t)._cb=n;e.call(this||t)}ZipObservable.prototype.subscribeCore=function(e){var r=(this||t)._s.length,n=new Array(r),s=arrayInitialize(r,falseFactory),i=arrayInitialize(r,emptyArrayFactory);for(var o=0;o<r;o++){var u=(this||t)._s[o],a=new Le;n[o]=a;g(u)&&(u=en(u));a.setDisposable(u.subscribe(new Sr(e,o,this||t,i,s)))}return new We(n)};return ZipObservable}(_t);var Sr=function(e){Ee(ZipObserver,e);function ZipObserver(r,n,s,i,o){(this||t)._o=r;(this||t)._i=n;(this||t)._p=s;(this||t)._q=i;(this||t)._d=o;e.call(this||t)}function notEmpty(e){return e.length>0}function shiftEach(e){return e.shift()}function notTheSame(e){return function(t,r){return r!==e}}ZipObserver.prototype.next=function(e){(this||t)._q[(this||t)._i].push(e);if((this||t)._q.every(notEmpty)){var r=(this||t)._q.map(shiftEach);var n=D((this||t)._p._cb).apply(null,r);if(n===C)return(this||t)._o.onError(n.e);(this||t)._o.onNext(n)}else(this||t)._d.filter(notTheSame((this||t)._i)).every(d)&&(this||t)._o.onCompleted()};ZipObserver.prototype.error=function(e){(this||t)._o.onError(e)};ZipObserver.prototype.completed=function(){(this||t)._d[(this||t)._i]=true;(this||t)._d.every(d)&&(this||t)._o.onCompleted()};return ZipObserver}(vt);yt.zip=function(){if(0===arguments.length)throw new Error("invalid arguments");var e=arguments.length,r=new Array(e);for(var n=0;n<e;n++)r[n]=arguments[n];var s=S(r[e-1])?r.pop():argumentsToArray;Array.isArray(r[0])&&(r=r[0]);var i=this||t;r.unshift(i);return new gr(r,s)};Ot.zip=function(){var e=arguments.length,t=new Array(e);for(var r=0;r<e;r++)t[r]=arguments[r];Array.isArray(t[0])&&(t=S(t[1])?t[0].concat(t[1]):t[0]);var n=t.shift();return n.zip.apply(n,t)};function falseFactory(){return false}function emptyArrayFactory(){return[]}function argumentsToArray(){var e=arguments.length,t=new Array(e);for(var r=0;r<e;r++)t[r]=arguments[r];return t}var Cr=function(e){Ee(ZipIterableObservable,e);function ZipIterableObservable(r,n){(this||t).sources=r;(this||t)._cb=n;e.call(this||t)}ZipIterableObservable.prototype.subscribeCore=function(e){var r=(this||t).sources,n=r.length,s=new Array(n);var i={q:arrayInitialize(n,emptyArrayFactory),done:arrayInitialize(n,falseFactory),cb:(this||t)._cb,o:e};for(var o=0;o<n;o++)(function(e){var t=r[e],n=new Le;(U(t)||W(t))&&(t=Lt(t));s[e]=n;n.setDisposable(t.subscribe(new Dr(i,e)))})(o);return new We(s)};return ZipIterableObservable}(_t);var Dr=function(e){Ee(ZipIterableObserver,e);function ZipIterableObserver(r,n){(this||t)._s=r;(this||t)._i=n;e.call(this||t)}function notEmpty(e){return e.length>0}function shiftEach(e){return e.shift()}function notTheSame(e){return function(t,r){return r!==e}}ZipIterableObserver.prototype.next=function(e){(this||t)._s.q[(this||t)._i].push(e);if((this||t)._s.q.every(notEmpty)){var r=(this||t)._s.q.map(shiftEach),n=D((this||t)._s.cb).apply(null,r);if(n===C)return(this||t)._s.o.onError(n.e);(this||t)._s.o.onNext(n)}else(this||t)._s.done.filter(notTheSame((this||t)._i)).every(d)&&(this||t)._s.o.onCompleted()};ZipIterableObserver.prototype.error=function(e){(this||t)._s.o.onError(e)};ZipIterableObserver.prototype.completed=function(){(this||t)._s.done[(this||t)._i]=true;(this||t)._s.done.every(d)&&(this||t)._s.o.onCompleted()};return ZipIterableObserver}(vt);yt.zipIterable=function(){if(0===arguments.length)throw new Error("invalid arguments");var e=arguments.length,r=new Array(e);for(var n=0;n<e;n++)r[n]=arguments[n];var s=S(r[e-1])?r.pop():argumentsToArray;var i=this||t;r.unshift(i);return new Cr(r,s)};function asObservable(e){return function subscribe(t){return e.subscribe(t)}}yt.asObservable=function(){return new wn(asObservable(this||t),this||t)};var Er=function(e){Ee(DematerializeObservable,e);function DematerializeObservable(r){(this||t).source=r;e.call(this||t)}DematerializeObservable.prototype.subscribeCore=function(e){return(this||t).source.subscribe(new xr(e))};return DematerializeObservable}(_t);var xr=function(e){Ee(DematerializeObserver,e);function DematerializeObserver(r){(this||t)._o=r;e.call(this||t)}DematerializeObserver.prototype.next=function(e){e.accept((this||t)._o)};DematerializeObserver.prototype.error=function(e){(this||t)._o.onError(e)};DematerializeObserver.prototype.completed=function(){(this||t)._o.onCompleted()};return DematerializeObserver}(vt);yt.dematerialize=function(){return new Er(this||t)};var Ar=function(e){Ee(DistinctUntilChangedObservable,e);function DistinctUntilChangedObservable(r,n,s){(this||t).source=r;(this||t).keyFn=n;(this||t).comparer=s;e.call(this||t)}DistinctUntilChangedObservable.prototype.subscribeCore=function(e){return(this||t).source.subscribe(new Nr(e,(this||t).keyFn,(this||t).comparer))};return DistinctUntilChangedObservable}(_t);var Nr=function(e){Ee(DistinctUntilChangedObserver,e);function DistinctUntilChangedObserver(r,n,s){(this||t).o=r;(this||t).keyFn=n;(this||t).comparer=s;(this||t).hasCurrentKey=false;(this||t).currentKey=null;e.call(this||t)}DistinctUntilChangedObserver.prototype.next=function(e){var r=e,n;if(S((this||t).keyFn)){r=D((this||t).keyFn)(e);if(r===C)return(this||t).o.onError(r.e)}if((this||t).hasCurrentKey){n=D((this||t).comparer)((this||t).currentKey,r);if(n===C)return(this||t).o.onError(n.e)}if(!(this||t).hasCurrentKey||!n){(this||t).hasCurrentKey=true;(this||t).currentKey=r;(this||t).o.onNext(e)}};DistinctUntilChangedObserver.prototype.error=function(e){(this||t).o.onError(e)};DistinctUntilChangedObserver.prototype.completed=function(){(this||t).o.onCompleted()};return DistinctUntilChangedObserver}(vt);yt.distinctUntilChanged=function(e,r){r||(r=O);return new Ar(this||t,e,r)};var kr=function(e){Ee(TapObservable,e);function TapObservable(r,n,s,i){(this||t).source=r;(this||t)._oN=n;(this||t)._oE=s;(this||t)._oC=i;e.call(this||t)}TapObservable.prototype.subscribeCore=function(e){return(this||t).source.subscribe(new InnerObserver(e,this||t))};Ee(InnerObserver,vt);function InnerObserver(e,r){(this||t).o=e;(this||t).t=!r._oN||S(r._oN)?bt(r._oN||v,r._oE||v,r._oC||v):r._oN;(this||t).isStopped=false;vt.call(this||t)}InnerObserver.prototype.next=function(e){var r=D((this||t).t.onNext).call((this||t).t,e);r===C&&(this||t).o.onError(r.e);(this||t).o.onNext(e)};InnerObserver.prototype.error=function(e){var r=D((this||t).t.onError).call((this||t).t,e);if(r===C)return(this||t).o.onError(r.e);(this||t).o.onError(e)};InnerObserver.prototype.completed=function(){var e=D((this||t).t.onCompleted).call((this||t).t);if(e===C)return(this||t).o.onError(e.e);(this||t).o.onCompleted()};return TapObservable}(_t);yt["do"]=yt.tap=yt.doAction=function(e,r,n){return new kr(this||t,e,r,n)};yt.doOnNext=yt.tapOnNext=function(e,t){return this.tap("undefined"!==typeof t?function(r){e.call(t,r)}:e)};yt.doOnError=yt.tapOnError=function(e,t){return this.tap(v,"undefined"!==typeof t?function(r){e.call(t,r)}:e)};yt.doOnCompleted=yt.tapOnCompleted=function(e,t){return this.tap(v,null,"undefined"!==typeof t?function(){e.call(t)}:e)};var Ir=function(e){Ee(FinallyObservable,e);function FinallyObservable(r,n,s){(this||t).source=r;(this||t)._fn=z(n,s,0);e.call(this||t)}FinallyObservable.prototype.subscribeCore=function(e){var r=D((this||t).source.subscribe).call((this||t).source,e);if(r===C){this._fn();thrower(r.e)}return new FinallyDisposable(r,(this||t)._fn)};function FinallyDisposable(e,r){(this||t).isDisposed=false;(this||t)._s=e;(this||t)._fn=r}FinallyDisposable.prototype.dispose=function(){if(!(this||t).isDisposed){var e=D((this||t)._s.dispose).call((this||t)._s);this._fn();e===C&&thrower(e.e)}};return FinallyObservable}(_t);yt["finally"]=function(e,r){return new Ir(this||t,e,r)};var Tr=function(e){Ee(IgnoreElementsObservable,e);function IgnoreElementsObservable(r){(this||t).source=r;e.call(this||t)}IgnoreElementsObservable.prototype.subscribeCore=function(e){return(this||t).source.subscribe(new InnerObserver(e))};function InnerObserver(e){(this||t).o=e;(this||t).isStopped=false}InnerObserver.prototype.onNext=v;InnerObserver.prototype.onError=function(e){if(!(this||t).isStopped){(this||t).isStopped=true;(this||t).o.onError(e)}};InnerObserver.prototype.onCompleted=function(){if(!(this||t).isStopped){(this||t).isStopped=true;(this||t).o.onCompleted()}};InnerObserver.prototype.dispose=function(){(this||t).isStopped=true};InnerObserver.prototype.fail=function(e){if(!(this||t).isStopped){(this||t).isStopped=true;(this||t).observer.onError(e);return true}return false};return IgnoreElementsObservable}(_t);yt.ignoreElements=function(){return new Tr(this||t)};var jr=function(e){Ee(MaterializeObservable,e);function MaterializeObservable(r,n){(this||t).source=r;e.call(this||t)}MaterializeObservable.prototype.subscribeCore=function(e){return(this||t).source.subscribe(new Fr(e))};return MaterializeObservable}(_t);var Fr=function(e){Ee(MaterializeObserver,e);function MaterializeObserver(r){(this||t)._o=r;e.call(this||t)}MaterializeObserver.prototype.next=function(e){(this||t)._o.onNext(lt(e))};MaterializeObserver.prototype.error=function(e){(this||t)._o.onNext(ht(e));(this||t)._o.onCompleted()};MaterializeObserver.prototype.completed=function(){(this||t)._o.onNext(pt());(this||t)._o.onCompleted()};return MaterializeObserver}(vt);yt.materialize=function(){return new jr(this||t)};yt.repeat=function(e){return Et(this||t,e).concat()};yt.retry=function(e){return Et(this||t,e).catchError()};var Rr=function(e){function createDisposable(e){return{isDisposed:false,dispose:function(){if(!(this||t).isDisposed){(this||t).isDisposed=true;e.isDisposed=true}}}}function RetryWhenObservable(r,n){(this||t).source=r;(this||t)._notifier=n;e.call(this||t)}Ee(RetryWhenObservable,e);RetryWhenObservable.prototype.subscribeCore=function(e){var r=new Sn,n=new Sn,s=this._notifier(r),i=s.subscribe(n);var o=(this||t).source["@@iterator"]();var u={isDisposed:false},a,c=new Me;var l=Ge.scheduleRecursive(null,(function(t,s){if(!u.isDisposed){var i=o.next();if(i.done)a?e.onError(a):e.onCompleted();else{var l=i.value;g(l)&&(l=en(l));var h=new Le;var p=new Le;c.setDisposable(new Pe(p,h));h.setDisposable(l.subscribe((function(t){e.onNext(t)}),(function(t){p.setDisposable(n.subscribe(s,(function(t){e.onError(t)}),(function(){e.onCompleted()})));r.onNext(t);h.dispose()}),(function(){e.onCompleted()})))}}}));return new We([i,c,l,createDisposable(u)])};return RetryWhenObservable}(_t);yt.retryWhen=function(e){return new Rr(repeat(this||t),e)};function repeat(e){return{"@@iterator":function(){return{next:function(){return{done:false,value:e}}}}}}var qr=function(e){function createDisposable(e){return{isDisposed:false,dispose:function(){if(!(this||t).isDisposed){(this||t).isDisposed=true;e.isDisposed=true}}}}function RepeatWhenObservable(r,n){(this||t).source=r;(this||t)._notifier=n;e.call(this||t)}Ee(RepeatWhenObservable,e);RepeatWhenObservable.prototype.subscribeCore=function(e){var r=new Sn,n=new Sn,s=this._notifier(r),i=s.subscribe(n);var o=(this||t).source["@@iterator"]();var u={isDisposed:false},a,c=new Me;var l=Ge.scheduleRecursive(null,(function(t,s){if(!u.isDisposed){var i=o.next();if(i.done)a?e.onError(a):e.onCompleted();else{var l=i.value;g(l)&&(l=en(l));var h=new Le;var p=new Le;c.setDisposable(new Pe(p,h));h.setDisposable(l.subscribe((function(t){e.onNext(t)}),(function(t){e.onError(t)}),(function(){p.setDisposable(n.subscribe(s,(function(t){e.onError(t)}),(function(){e.onCompleted()})));r.onNext(null);h.dispose()})))}}}));return new We([i,c,l,createDisposable(u)])};return RepeatWhenObservable}(_t);yt.repeatWhen=function(e){return new qr(repeat(this||t),e)};var Lr=function(e){Ee(ScanObservable,e);function ScanObservable(r,n,s,i){(this||t).source=r;(this||t).accumulator=n;(this||t).hasSeed=s;(this||t).seed=i;e.call(this||t)}ScanObservable.prototype.subscribeCore=function(e){return(this||t).source.subscribe(new Mr(e,this||t))};return ScanObservable}(_t);var Mr=function(e){Ee(ScanObserver,e);function ScanObserver(r,n){(this||t)._o=r;(this||t)._p=n;(this||t)._fn=n.accumulator;(this||t)._hs=n.hasSeed;(this||t)._s=n.seed;(this||t)._ha=false;(this||t)._a=null;(this||t)._hv=false;(this||t)._i=0;e.call(this||t)}ScanObserver.prototype.next=function(e){!(this||t)._hv&&((this||t)._hv=true);if((this||t)._ha)(this||t)._a=D((this||t)._fn)((this||t)._a,e,(this||t)._i,(this||t)._p);else{(this||t)._a=(this||t)._hs?D((this||t)._fn)((this||t)._s,e,(this||t)._i,(this||t)._p):e;(this||t)._ha=true}if((this||t)._a===C)return(this||t)._o.onError((this||t)._a.e);(this||t)._o.onNext((this||t)._a);(this||t)._i++};ScanObserver.prototype.error=function(e){(this||t)._o.onError(e)};ScanObserver.prototype.completed=function(){!(this||t)._hv&&(this||t)._hs&&(this||t)._o.onNext((this||t)._s);(this||t)._o.onCompleted()};return ScanObserver}(vt);yt.scan=function(){var e=false,r,n=arguments[0];if(2===arguments.length){e=true;r=arguments[1]}return new Lr(this||t,n,e,r)};var Pr=function(e){Ee(SkipLastObservable,e);function SkipLastObservable(r,n){(this||t).source=r;(this||t)._c=n;e.call(this||t)}SkipLastObservable.prototype.subscribeCore=function(e){return(this||t).source.subscribe(new Wr(e,(this||t)._c))};return SkipLastObservable}(_t);var Wr=function(e){Ee(SkipLastObserver,e);function SkipLastObserver(r,n){(this||t)._o=r;(this||t)._c=n;(this||t)._q=[];e.call(this||t)}SkipLastObserver.prototype.next=function(e){(this||t)._q.push(e);(this||t)._q.length>(this||t)._c&&(this||t)._o.onNext((this||t)._q.shift())};SkipLastObserver.prototype.error=function(e){(this||t)._o.onError(e)};SkipLastObserver.prototype.completed=function(){(this||t)._o.onCompleted()};return SkipLastObserver}(vt);yt.skipLast=function(e){if(e<0)throw new j;return new Pr(this||t,e)};yt.startWith=function(){var e,r,n=0;if(!!arguments.length&&Ze(arguments[0])){r=arguments[0];n=1}else r=Qe;for(var s=[],i=n,o=arguments.length;i<o;i++)s.push(arguments[i]);return At([Pt(s,r),this||t]).concat()};var Ur=function(e){Ee(TakeLastObserver,e);function TakeLastObserver(r,n){(this||t)._o=r;(this||t)._c=n;(this||t)._q=[];e.call(this||t)}TakeLastObserver.prototype.next=function(e){(this||t)._q.push(e);(this||t)._q.length>(this||t)._c&&(this||t)._q.shift()};TakeLastObserver.prototype.error=function(e){(this||t)._o.onError(e)};TakeLastObserver.prototype.completed=function(){while((this||t)._q.length>0)(this||t)._o.onNext((this||t)._q.shift());(this||t)._o.onCompleted()};return TakeLastObserver}(vt);yt.takeLast=function(e){if(e<0)throw new j;var r=this||t;return new wn((function(t){return r.subscribe(new Ur(t,e))}),r)};yt.flatMapConcat=yt.concatMap=function(e,r,n){return new wt(this||t,e,r,n).merge(1)};var zr=function(e){Ee(MapObservable,e);function MapObservable(r,n,s){(this||t).source=r;(this||t).selector=z(n,s,3);e.call(this||t)}function innerMap(e,r){return function(n,s,i){return e.call(this||t,r.selector(n,s,i),s,i)}}MapObservable.prototype.internalMap=function(e,r){return new MapObservable((this||t).source,innerMap(e,this||t),r)};MapObservable.prototype.subscribeCore=function(e){return(this||t).source.subscribe(new InnerObserver(e,(this||t).selector,this||t))};Ee(InnerObserver,vt);function InnerObserver(e,r,n){(this||t).o=e;(this||t).selector=r;(this||t).source=n;(this||t).i=0;vt.call(this||t)}InnerObserver.prototype.next=function(e){var r=D((this||t).selector)(e,(this||t).i++,(this||t).source);if(r===C)return(this||t).o.onError(r.e);(this||t).o.onNext(r)};InnerObserver.prototype.error=function(e){(this||t).o.onError(e)};InnerObserver.prototype.completed=function(){(this||t).o.onCompleted()};return MapObservable}(_t);yt.map=yt.select=function(e,r){var n="function"===typeof e?e:function(){return e};return(this||t)instanceof zr?this.internalMap(n,r):new zr(this||t,n,r)};function plucker(t,r){return function mapper(n){var s=n;for(var i=0;i<r;i++){var o=s[t[i]];if("undefined"===typeof o)return e;s=o}return s}}yt.pluck=function(){var e=arguments.length,t=new Array(e);if(0===e)throw new Error("List of properties cannot be empty.");for(var r=0;r<e;r++)t[r]=arguments[r];return this.map(plucker(t,e))};yt.flatMap=yt.selectMany=function(e,r,n){return new wt(this||t,e,r,n).mergeAll()};b.Observable.prototype.flatMapLatest=function(e,r,n){return new wt(this||t,e,r,n).switchLatest()};var Br=function(e){Ee(SkipObservable,e);function SkipObservable(r,n){(this||t).source=r;(this||t)._count=n;e.call(this||t)}SkipObservable.prototype.subscribeCore=function(e){return(this||t).source.subscribe(new SkipObserver(e,(this||t)._count))};function SkipObserver(e,r){(this||t)._o=e;(this||t)._r=r;vt.call(this||t)}Ee(SkipObserver,vt);SkipObserver.prototype.next=function(e){(this||t)._r<=0?(this||t)._o.onNext(e):(this||t)._r--};SkipObserver.prototype.error=function(e){(this||t)._o.onError(e)};SkipObserver.prototype.completed=function(){(this||t)._o.onCompleted()};return SkipObservable}(_t);yt.skip=function(e){if(e<0)throw new j;return new Br(this||t,e)};var Vr=function(e){Ee(SkipWhileObservable,e);function SkipWhileObservable(r,n){(this||t).source=r;(this||t)._fn=n;e.call(this||t)}SkipWhileObservable.prototype.subscribeCore=function(e){return(this||t).source.subscribe(new Zr(e,this||t))};return SkipWhileObservable}(_t);var Zr=function(e){Ee(SkipWhileObserver,e);function SkipWhileObserver(r,n){(this||t)._o=r;(this||t)._p=n;(this||t)._i=0;(this||t)._r=false;e.call(this||t)}SkipWhileObserver.prototype.next=function(e){if(!(this||t)._r){var r=D((this||t)._p._fn)(e,(this||t)._i++,(this||t)._p);if(r===C)return(this||t)._o.onError(r.e);(this||t)._r=!r}(this||t)._r&&(this||t)._o.onNext(e)};SkipWhileObserver.prototype.error=function(e){(this||t)._o.onError(e)};SkipWhileObserver.prototype.completed=function(){(this||t)._o.onCompleted()};return SkipWhileObserver}(vt);yt.skipWhile=function(e,r){var n=z(e,r,3);return new Vr(this||t,n)};var Hr=function(e){Ee(TakeObservable,e);function TakeObservable(r,n){(this||t).source=r;(this||t)._count=n;e.call(this||t)}TakeObservable.prototype.subscribeCore=function(e){return(this||t).source.subscribe(new TakeObserver(e,(this||t)._count))};function TakeObserver(e,r){(this||t)._o=e;(this||t)._c=r;(this||t)._r=r;vt.call(this||t)}Ee(TakeObserver,vt);TakeObserver.prototype.next=function(e){if((this||t)._r-- >0){(this||t)._o.onNext(e);(this||t)._r<=0&&(this||t)._o.onCompleted()}};TakeObserver.prototype.error=function(e){(this||t)._o.onError(e)};TakeObserver.prototype.completed=function(){(this||t)._o.onCompleted()};return TakeObservable}(_t);yt.take=function(e,r){if(e<0)throw new j;return 0===e?Ft(r):new Hr(this||t,e)};var Qr=function(e){Ee(TakeWhileObservable,e);function TakeWhileObservable(r,n){(this||t).source=r;(this||t)._fn=n;e.call(this||t)}TakeWhileObservable.prototype.subscribeCore=function(e){return(this||t).source.subscribe(new Kr(e,this||t))};return TakeWhileObservable}(_t);var Kr=function(e){Ee(TakeWhileObserver,e);function TakeWhileObserver(r,n){(this||t)._o=r;(this||t)._p=n;(this||t)._i=0;(this||t)._r=true;e.call(this||t)}TakeWhileObserver.prototype.next=function(e){if((this||t)._r){(this||t)._r=D((this||t)._p._fn)(e,(this||t)._i++,(this||t)._p);if((this||t)._r===C)return(this||t)._o.onError((this||t)._r.e)}(this||t)._r?(this||t)._o.onNext(e):(this||t)._o.onCompleted()};TakeWhileObserver.prototype.error=function(e){(this||t)._o.onError(e)};TakeWhileObserver.prototype.completed=function(){(this||t)._o.onCompleted()};return TakeWhileObserver}(vt);yt.takeWhile=function(e,r){var n=z(e,r,3);return new Qr(this||t,n)};var Gr=function(e){Ee(FilterObservable,e);function FilterObservable(r,n,s){(this||t).source=r;(this||t).predicate=z(n,s,3);e.call(this||t)}FilterObservable.prototype.subscribeCore=function(e){return(this||t).source.subscribe(new InnerObserver(e,(this||t).predicate,this||t))};function innerPredicate(e,r){return function(n,s,i){return r.predicate(n,s,i)&&e.call(this||t,n,s,i)}}FilterObservable.prototype.internalFilter=function(e,r){return new FilterObservable((this||t).source,innerPredicate(e,this||t),r)};Ee(InnerObserver,vt);function InnerObserver(e,r,n){(this||t).o=e;(this||t).predicate=r;(this||t).source=n;(this||t).i=0;vt.call(this||t)}InnerObserver.prototype.next=function(e){var r=D((this||t).predicate)(e,(this||t).i++,(this||t).source);if(r===C)return(this||t).o.onError(r.e);r&&(this||t).o.onNext(e)};InnerObserver.prototype.error=function(e){(this||t).o.onError(e)};InnerObserver.prototype.completed=function(){(this||t).o.onCompleted()};return FilterObservable}(_t);yt.filter=yt.where=function(e,r){return(this||t)instanceof Gr?this.internalFilter(e,r):new Gr(this||t,e,r)};function createCbObservable(e,t,r,n){var s=new Cn;n.push(createCbHandler(s,t,r));e.apply(t,n);return s.asObservable()}function createCbHandler(e,t,r){return function handler(){var n=arguments.length,s=new Array(n);for(var i=0;i<n;i++)s[i]=arguments[i];if(S(r)){s=D(r).apply(t,s);if(s===C)return e.onError(s.e);e.onNext(s)}else s.length<=1?e.onNext(s[0]):e.onNext(s);e.onCompleted()}}Ot.fromCallback=function(e,r,n){return function(){"undefined"===typeof r&&(r=this||t);var s=arguments.length,i=new Array(s);for(var o=0;o<s;o++)i[o]=arguments[o];return createCbObservable(e,r,n,i)}};function createNodeObservable(e,t,r,n){var s=new Cn;n.push(createNodeHandler(s,t,r));e.apply(t,n);return s.asObservable()}function createNodeHandler(e,t,r){return function handler(){var n=arguments[0];if(n)return e.onError(n);var s=arguments.length,i=[];for(var o=1;o<s;o++)i[o-1]=arguments[o];if(S(r)){var i=D(r).apply(t,i);if(i===C)return e.onError(i.e);e.onNext(i)}else i.length<=1?e.onNext(i[0]):e.onNext(i);e.onCompleted()}}Ot.fromNodeCallback=function(e,r,n){return function(){"undefined"===typeof r&&(r=this||t);var s=arguments.length,i=new Array(s);for(var o=0;o<s;o++)i[o]=arguments[o];return createNodeObservable(e,r,n,i)}};function isNodeList(e){return f.StaticNodeList?e instanceof f.StaticNodeList||e instanceof f.NodeList:"[object NodeList]"===Object.prototype.toString.call(e)}function ListenDisposable(e,r,n){(this||t)._e=e;(this||t)._n=r;(this||t)._fn=n;(this||t)._e.addEventListener((this||t)._n,(this||t)._fn,false);(this||t).isDisposed=false}ListenDisposable.prototype.dispose=function(){if(!(this||t).isDisposed){(this||t)._e.removeEventListener((this||t)._n,(this||t)._fn,false);(this||t).isDisposed=true}};function createEventListener(e,t,r){var n=new Ne;var s=Object.prototype.toString.call(e);if(isNodeList(e)||"[object HTMLCollection]"===s)for(var i=0,o=e.length;i<o;i++)n.add(createEventListener(e.item(i),t,r));else e&&n.add(new ListenDisposable(e,t,r));return n}b.config.useNativeEvents=false;var $r=function(e){Ee(EventObservable,e);function EventObservable(r,n,s){(this||t)._el=r;(this||t)._n=n;(this||t)._fn=s;e.call(this||t)}function createHandler(e,t){return function handler(){var r=arguments[0];if(S(t)){r=D(t).apply(null,arguments);if(r===C)return e.onError(r.e)}e.onNext(r)}}EventObservable.prototype.subscribeCore=function(e){return createEventListener((this||t)._el,(this||t)._n,createHandler(e,(this||t)._fn))};return EventObservable}(_t);Ot.fromEvent=function(e,t,r){return e.addListener?Xr((function(r){e.addListener(t,r)}),(function(r){e.removeListener(t,r)}),r):b.config.useNativeEvents||"function"!==typeof e.on||"function"!==typeof e.off?new $r(e,t,r).publish().refCount():Xr((function(r){e.on(t,r)}),(function(r){e.off(t,r)}),r)};var Jr=function(e){Ee(EventPatternObservable,e);function EventPatternObservable(r,n,s){(this||t)._add=r;(this||t)._del=n;(this||t)._fn=s;e.call(this||t)}function createHandler(e,t){return function handler(){var r=arguments[0];if(S(t)){r=D(t).apply(null,arguments);if(r===C)return e.onError(r.e)}e.onNext(r)}}EventPatternObservable.prototype.subscribeCore=function(e){var r=createHandler(e,(this||t)._fn);var n=this._add(r);return new EventPatternDisposable((this||t)._del,r,n)};function EventPatternDisposable(e,r,n){(this||t)._del=e;(this||t)._fn=r;(this||t)._ret=n;(this||t).isDisposed=false}EventPatternDisposable.prototype.dispose=function(){if(!(this||t).isDisposed){S((this||t)._del)&&this._del((this||t)._fn,(this||t)._ret);(this||t).isDisposed=true}};return EventPatternObservable}(_t);var Xr=Ot.fromEventPattern=function(e,t,r){return new Jr(e,t,r).publish().refCount()};var Yr=function(e){Ee(FromPromiseObservable,e);function FromPromiseObservable(r,n){(this||t)._p=r;(this||t)._s=n;e.call(this||t)}function scheduleNext(e,t){var r=t[0],n=t[1];r.onNext(n);r.onCompleted()}function scheduleError(e,t){var r=t[0],n=t[1];r.onError(n)}FromPromiseObservable.prototype.subscribeCore=function(e){var r=new Le,n=this||t;(this||t)._p.then((function(t){r.setDisposable(n._s.schedule([e,t],scheduleNext))}),(function(t){r.setDisposable(n._s.schedule([e,t],scheduleError))}));return r};return FromPromiseObservable}(_t);var en=Ot.fromPromise=function(e,t){t||(t=nt);return new Yr(e,t)};yt.toPromise=function(e){e||(e=b.config.Promise);if(!e)throw new F("Promise type not provided nor in Rx.config.Promise");var r=this||t;return new e((function(e,t){var n;r.subscribe((function(e){n=e}),t,(function(){e(n)}))}))};Ot.startAsync=function(e){var t=D(e)();return t===C?Gt(t.e):en(t)};var tn=function(e){Ee(MulticastObservable,e);function MulticastObservable(r,n,s){(this||t).source=r;(this||t)._fn1=n;(this||t)._fn2=s;e.call(this||t)}MulticastObservable.prototype.subscribeCore=function(e){var r=(this||t).source.multicast(this._fn1());return new Pe(this._fn2(r).subscribe(e),r.connect())};return MulticastObservable}(_t);yt.multicast=function(e,r){return S(e)?new tn(this||t,e,r):new nn(this||t,e)};yt.publish=function(e){return e&&S(e)?this.multicast((function(){return new Sn}),e):this.multicast(new Sn)};yt.share=function(){return this.publish().refCount()};yt.publishLast=function(e){return e&&S(e)?this.multicast((function(){return new Cn}),e):this.multicast(new Cn)};yt.publishValue=function(e,t){return 2===arguments.length?this.multicast((function(){return new En(t)}),e):this.multicast(new En(e))};yt.shareValue=function(e){return this.publishValue(e).refCount()};yt.replay=function(e,t,r,n){return e&&S(e)?this.multicast((function(){return new xn(t,r,n)}),e):this.multicast(new xn(t,r,n))};yt.shareReplay=function(e,t,r){return this.replay(null,e,t,r).refCount()};var rn=function(e){Ee(RefCountObservable,e);function RefCountObservable(r){(this||t).source=r;(this||t)._count=0;(this||t)._connectableSubscription=null;e.call(this||t)}RefCountObservable.prototype.subscribeCore=function(e){var r=(this||t).source.subscribe(e);1===++(this||t)._count&&((this||t)._connectableSubscription=(this||t).source.connect());return new RefCountDisposable(this||t,r)};function RefCountDisposable(e,r){(this||t)._p=e;(this||t)._s=r;(this||t).isDisposed=false}RefCountDisposable.prototype.dispose=function(){if(!(this||t).isDisposed){(this||t).isDisposed=true;(this||t)._s.dispose();0===--(this||t)._p._count&&(this||t)._p._connectableSubscription.dispose()}};return RefCountObservable}(_t);var nn=b.ConnectableObservable=function(e){Ee(ConnectableObservable,e);function ConnectableObservable(r,n){(this||t).source=r;(this||t)._connection=null;(this||t)._source=r.asObservable();(this||t)._subject=n;e.call(this||t)}function ConnectDisposable(e,r){(this||t)._p=e;(this||t)._s=r}ConnectDisposable.prototype.dispose=function(){if((this||t)._s){(this||t)._s.dispose();(this||t)._s=null;(this||t)._p._connection=null}};ConnectableObservable.prototype.connect=function(){if(!(this||t)._connection){var e=(this||t)._source.subscribe((this||t)._subject);(this||t)._connection=new ConnectDisposable(this||t,e)}return(this||t)._connection};ConnectableObservable.prototype._subscribe=function(e){return(this||t)._subject.subscribe(e)};ConnectableObservable.prototype.refCount=function(){return new rn(this||t)};return ConnectableObservable}(Ot);var sn=function(e){Ee(TimerObservable,e);function TimerObservable(r,n){(this||t)._dt=r;(this||t)._s=n;e.call(this||t)}TimerObservable.prototype.subscribeCore=function(e){return(this||t)._s.scheduleFuture(e,(this||t)._dt,scheduleMethod)};function scheduleMethod(e,t){t.onNext(0);t.onCompleted()}return TimerObservable}(_t);function _observableTimer(e,t){return new sn(e,t)}function observableTimerDateAndPeriod(e,t,r){return new wn((function(n){var s=e,i=Ve(t);return r.scheduleRecursiveFuture(0,s,(function(e,t){if(i>0){var o=r.now();s=new Date(s.getTime()+i);s.getTime()<=o&&(s=new Date(o+i))}n.onNext(e);t(e+1,new Date(s))}))}))}function observableTimerTimeSpanAndPeriod(e,t,r){return e===t?new wn((function(e){return r.schedulePeriodic(0,t,(function(t){e.onNext(t);return t+1}))})):It((function(){return observableTimerDateAndPeriod(new Date(r.now()+e),t,r)}))}var on=Ot.interval=function(e,t){return observableTimerTimeSpanAndPeriod(e,e,Ze(t)?t:nt)};var un=Ot.timer=function(t,r,n){var s;Ze(n)||(n=nt);null!=r&&"number"===typeof r?s=r:Ze(r)&&(n=r);return(t instanceof Date||"number"===typeof t)&&s===e?_observableTimer(t,n):t instanceof Date&&s!==e?observableTimerDateAndPeriod(t,r,n):observableTimerTimeSpanAndPeriod(t,s,n)};function observableDelayRelative(e,t,r){return new wn((function(n){var s=false,i=new Me,o=null,u=[],a=false,c;c=e.materialize().timestamp(r).subscribe((function(e){var c,l;if("E"===e.value.kind){u=[];u.push(e);o=e.value.error;l=!a}else{u.push({value:e.value,timestamp:e.timestamp+t});l=!s;s=true}if(l)if(null!==o)n.onError(o);else{c=new Le;i.setDisposable(c);c.setDisposable(r.scheduleRecursiveFuture(null,t,(function(e,t){var i,c,l,h;if(null===o){a=true;do{l=null;u.length>0&&u[0].timestamp-r.now()<=0&&(l=u.shift().value);null!==l&&l.accept(n)}while(null!==l);h=false;c=0;if(u.length>0){h=true;c=Math.max(0,u[0].timestamp-r.now())}else s=false;i=o;a=false;null!==i?n.onError(i):h&&t(null,c)}})))}}));return new Pe(c,i)}),e)}function observableDelayAbsolute(e,t,r){return It((function(){return observableDelayRelative(e,t-r.now(),r)}))}function delayWithSelector(e,t,r){var n,s;if(S(t))s=t;else{n=t;s=r}return new wn((function(t){var r=new Ne,i=false,o=new Me;function start(){o.setDisposable(e.subscribe((function(e){var n=D(s)(e);if(n===C)return t.onError(n.e);var i=new Le;r.add(i);i.setDisposable(n.subscribe((function(){t.onNext(e);r.remove(i);done()}),(function(e){t.onError(e)}),(function(){t.onNext(e);r.remove(i);done()})))}),(function(e){t.onError(e)}),(function(){i=true;o.dispose();done()})))}function done(){i&&0===r.length&&t.onCompleted()}n?o.setDisposable(n.subscribe(start,(function(e){t.onError(e)}),start)):start();return new Pe(o,r)}),e)}yt.delay=function(){var e=arguments[0];if("number"===typeof e||e instanceof Date){var r=e,n=arguments[1];Ze(n)||(n=nt);return r instanceof Date?observableDelayAbsolute(this||t,r,n):observableDelayRelative(this||t,r,n)}if(Ot.isObservable(e)||S(e))return delayWithSelector(this||t,e,arguments[1]);throw new Error("Invalid arguments")};var an=function(e){Ee(DebounceObservable,e);function DebounceObservable(r,n,s){Ze(s)||(s=nt);(this||t).source=r;(this||t)._dt=n;(this||t)._s=s;e.call(this||t)}DebounceObservable.prototype.subscribeCore=function(e){var r=new Me;return new Pe((this||t).source.subscribe(new cn(e,(this||t)._dt,(this||t)._s,r)),r)};return DebounceObservable}(_t);var cn=function(e){Ee(DebounceObserver,e);function DebounceObserver(r,n,s,i){(this||t)._o=r;(this||t)._d=n;(this||t)._scheduler=s;(this||t)._c=i;(this||t)._v=null;(this||t)._hv=false;(this||t)._id=0;e.call(this||t)}function scheduleFuture(e,t){t.self._hv&&t.self._id===t.currentId&&t.self._o.onNext(t.x);t.self._hv=false}DebounceObserver.prototype.next=function(e){(this||t)._hv=true;(this||t)._v=e;var r=++(this||t)._id,n=new Le;(this||t)._c.setDisposable(n);n.setDisposable((this||t)._scheduler.scheduleFuture(this||t,(this||t)._d,(function(t,n){n._hv&&n._id===r&&n._o.onNext(e);n._hv=false})))};DebounceObserver.prototype.error=function(e){(this||t)._c.dispose();(this||t)._o.onError(e);(this||t)._hv=false;(this||t)._id++};DebounceObserver.prototype.completed=function(){(this||t)._c.dispose();(this||t)._hv&&(this||t)._o.onNext((this||t)._v);(this||t)._o.onCompleted();(this||t)._hv=false;(this||t)._id++};return DebounceObserver}(vt);function debounceWithSelector(e,t){return new wn((function(r){var n,s=false,i=new Me,o=0;var u=e.subscribe((function(e){var u=D(t)(e);if(u===C)return r.onError(u.e);g(u)&&(u=en(u));s=true;n=e;o++;var a=o,c=new Le;i.setDisposable(c);c.setDisposable(u.subscribe((function(){s&&o===a&&r.onNext(n);s=false;c.dispose()}),(function(e){r.onError(e)}),(function(){s&&o===a&&r.onNext(n);s=false;c.dispose()})))}),(function(e){i.dispose();r.onError(e);s=false;o++}),(function(){i.dispose();s&&r.onNext(n);r.onCompleted();s=false;o++}));return new Pe(u,i)}),e)}yt.debounce=function(){if(S(arguments[0]))return debounceWithSelector(this||t,arguments[0]);if("number"===typeof arguments[0])return new an(this||t,arguments[0],arguments[1]);throw new Error("Invalid arguments")};var ln=function(e){Ee(TimestampObservable,e);function TimestampObservable(r,n){(this||t).source=r;(this||t)._s=n;e.call(this||t)}TimestampObservable.prototype.subscribeCore=function(e){return(this||t).source.subscribe(new hn(e,(this||t)._s))};return TimestampObservable}(_t);var hn=function(e){Ee(TimestampObserver,e);function TimestampObserver(r,n){(this||t)._o=r;(this||t)._s=n;e.call(this||t)}TimestampObserver.prototype.next=function(e){(this||t)._o.onNext({value:e,timestamp:(this||t)._s.now()})};TimestampObserver.prototype.error=function(e){(this||t)._o.onError(e)};TimestampObserver.prototype.completed=function(){(this||t)._o.onCompleted()};return TimestampObserver}(vt);yt.timestamp=function(e){Ze(e)||(e=nt);return new ln(this||t,e)};var pn=function(e){Ee(SampleObservable,e);function SampleObservable(r,n){(this||t).source=r;(this||t)._sampler=n;e.call(this||t)}SampleObservable.prototype.subscribeCore=function(e){var r={o:e,atEnd:false,value:null,hasValue:false,sourceSubscription:new Le};r.sourceSubscription.setDisposable((this||t).source.subscribe(new bn(r)));return new Pe(r.sourceSubscription,(this||t)._sampler.subscribe(new fn(r)))};return SampleObservable}(_t);var fn=function(e){Ee(SamplerObserver,e);function SamplerObserver(r){(this||t)._s=r;e.call(this||t)}SamplerObserver.prototype._handleMessage=function(){if((this||t)._s.hasValue){(this||t)._s.hasValue=false;(this||t)._s.o.onNext((this||t)._s.value)}(this||t)._s.atEnd&&(this||t)._s.o.onCompleted()};SamplerObserver.prototype.next=function(){this._handleMessage()};SamplerObserver.prototype.error=function(e){(this||t)._s.onError(e)};SamplerObserver.prototype.completed=function(){this._handleMessage()};return SamplerObserver}(vt);var bn=function(e){Ee(SampleSourceObserver,e);function SampleSourceObserver(r){(this||t)._s=r;e.call(this||t)}SampleSourceObserver.prototype.next=function(e){(this||t)._s.hasValue=true;(this||t)._s.value=e};SampleSourceObserver.prototype.error=function(e){(this||t)._s.o.onError(e)};SampleSourceObserver.prototype.completed=function(){(this||t)._s.atEnd=true;(this||t)._s.sourceSubscription.dispose()};return SampleSourceObserver}(vt);yt.sample=function(e,r){Ze(r)||(r=nt);return new pn(this||t,"number"===typeof e?on(e,r):e)};var vn=b.TimeoutError=function(e){(this||t).message=e||"Timeout has occurred";(this||t).name="TimeoutError";Error.call(this||t)};vn.prototype=Object.create(Error.prototype);function timeoutWithSelector(e,t,r,n){if(S(t)){n=r;r=t;t=zt()}Ot.isObservable(n)||(n=Gt(new vn));return new wn((function(s){var i=new Me,o=new Me,u=new Le;i.setDisposable(u);var a=0,c=false;function setTimer(e){var t=a,r=new Le;function timerWins(){c=t===a;return c}o.setDisposable(r);r.setDisposable(e.subscribe((function(){timerWins()&&i.setDisposable(n.subscribe(s));r.dispose()}),(function(e){timerWins()&&s.onError(e)}),(function(){timerWins()&&i.setDisposable(n.subscribe(s))})))}setTimer(t);function oWins(){var e=!c;e&&a++;return e}u.setDisposable(e.subscribe((function(e){if(oWins()){s.onNext(e);var t=D(r)(e);if(t===C)return s.onError(t.e);setTimer(g(t)?en(t):t)}}),(function(e){oWins()&&s.onError(e)}),(function(){oWins()&&s.onCompleted()})));return new Pe(i,o)}),e)}function timeout(e,t,r,n){if(Ze(r)){n=r;r=Gt(new vn)}r instanceof Error&&(r=Gt(r));Ze(n)||(n=nt);Ot.isObservable(r)||(r=Gt(new vn));return new wn((function(s){var i=0,o=new Le,u=new Me,a=false,c=new Me;u.setDisposable(o);function createTimer(){var e=i;c.setDisposable(n.scheduleFuture(null,t,(function(){a=i===e;if(a){g(r)&&(r=en(r));u.setDisposable(r.subscribe(s))}})))}createTimer();o.setDisposable(e.subscribe((function(e){if(!a){i++;s.onNext(e);createTimer()}}),(function(e){if(!a){i++;s.onError(e)}}),(function(){if(!a){i++;s.onCompleted()}})));return new Pe(u,c)}),e)}yt.timeout=function(){var e=arguments[0];if(e instanceof Date||"number"===typeof e)return timeout(this||t,e,arguments[1],arguments[2]);if(Ot.isObservable(e)||S(e))return timeoutWithSelector(this||t,e,arguments[1],arguments[2]);throw new Error("Invalid arguments")};yt.throttle=function(e,r){Ze(r)||(r=nt);var n=+e||0;if(n<=0)throw new RangeError("windowDuration cannot be less or equal zero.");var s=this||t;return new wn((function(e){var t=0;return s.subscribe((function(s){var i=r.now();if(0===t||i-t>=n){t=i;e.onNext(s)}}),(function(t){e.onError(t)}),(function(){e.onCompleted()}))}),s)};var dn=function(e){Ee(PausableObservable,e);function PausableObservable(r,n){(this||t).source=r;(this||t).controller=new Sn;n&&n.subscribe?(this||t).pauser=(this||t).controller.merge(n):(this||t).pauser=(this||t).controller;e.call(this||t)}PausableObservable.prototype._subscribe=function(e){var r=(this||t).source.publish(),n=r.subscribe(e),s=je;var i=(this||t).pauser.distinctUntilChanged().subscribe((function(e){if(e)s=r.connect();else{s.dispose();s=je}}));return new We([n,s,i])};PausableObservable.prototype.pause=function(){(this||t).controller.onNext(false)};PausableObservable.prototype.resume=function(){(this||t).controller.onNext(true)};return PausableObservable}(Ot);yt.pausable=function(e){return new dn(this||t,e)};function combineLatestSource(e,t,r){return new wn((function(n){var s=[false,false],i=false,o=false,u=new Array(2),a;function next(e,t){u[t]=e;s[t]=true;if(i||(i=s.every(d))){if(a)return n.onError(a);var c=D(r).apply(null,u);if(c===C)return n.onError(c.e);n.onNext(c)}o&&u[1]&&n.onCompleted()}return new Pe(e.subscribe((function(e){next(e,0)}),(function(e){u[1]?n.onError(e):a=e}),(function(){o=true;u[1]&&n.onCompleted()})),t.subscribe((function(e){next(e,1)}),(function(e){n.onError(e)}),(function(){o=true;next(true,1)})))}),e)}var yn=function(r){Ee(PausableBufferedObservable,r);function PausableBufferedObservable(e,n){(this||t).source=e;(this||t).controller=new Sn;n&&n.subscribe?(this||t).pauser=(this||t).controller.merge(n):(this||t).pauser=(this||t).controller;r.call(this||t)}PausableBufferedObservable.prototype._subscribe=function(r){var n=[],s;function drainQueue(){while(n.length>0)r.onNext(n.shift())}var i=combineLatestSource((this||t).source,(this||t).pauser.startWith(false).distinctUntilChanged(),(function(e,t){return{data:e,shouldFire:t}})).subscribe((function(t){if(s!==e&&t.shouldFire!==s){s=t.shouldFire;t.shouldFire&&drainQueue()}else{s=t.shouldFire;t.shouldFire?r.onNext(t.data):n.push(t.data)}}),(function(e){drainQueue();r.onError(e)}),(function(){drainQueue();r.onCompleted()}));return i};PausableBufferedObservable.prototype.pause=function(){(this||t).controller.onNext(false)};PausableBufferedObservable.prototype.resume=function(){(this||t).controller.onNext(true)};return PausableBufferedObservable}(Ot);yt.pausableBuffered=function(e){return new yn(this||t,e)};var On=function(e){Ee(ControlledObservable,e);function ControlledObservable(r,n,s){e.call(this||t);(this||t).subject=new mn(n,s);(this||t).source=r.multicast((this||t).subject).refCount()}ControlledObservable.prototype._subscribe=function(e){return(this||t).source.subscribe(e)};ControlledObservable.prototype.request=function(e){return(this||t).subject.request(null==e?-1:e)};return ControlledObservable}(Ot);var mn=function(e){Ee(ControlledSubject,e);function ControlledSubject(r,n){null==r&&(r=true);e.call(this||t);(this||t).subject=new Sn;(this||t).enableQueue=r;(this||t).queue=r?[]:null;(this||t).requestedCount=0;(this||t).requestedDisposable=null;(this||t).error=null;(this||t).hasFailed=false;(this||t).hasCompleted=false;(this||t).scheduler=n||Ge}xe(ControlledSubject.prototype,ft,{_subscribe:function(e){return(this||t).subject.subscribe(e)},onCompleted:function(){(this||t).hasCompleted=true;if((this||t).enableQueue&&0!==(this||t).queue.length)(this||t).queue.push(ot.createOnCompleted());else{(this||t).subject.onCompleted();this.disposeCurrentRequest()}},onError:function(e){(this||t).hasFailed=true;(this||t).error=e;if((this||t).enableQueue&&0!==(this||t).queue.length)(this||t).queue.push(ot.createOnError(e));else{(this||t).subject.onError(e);this.disposeCurrentRequest()}},onNext:function(e){if((this||t).requestedCount<=0)(this||t).enableQueue&&(this||t).queue.push(ot.createOnNext(e));else{0===(this||t).requestedCount--&&this.disposeCurrentRequest();(this||t).subject.onNext(e)}},_processRequest:function(e){if((this||t).enableQueue)while((this||t).queue.length>0&&(e>0||"N"!==(this||t).queue[0].kind)){var r=(this||t).queue.shift();r.accept((this||t).subject);if("N"===r.kind)e--;else{this.disposeCurrentRequest();(this||t).queue=[]}}return e},request:function(e){this.disposeCurrentRequest();var r=this||t;(this||t).requestedDisposable=(this||t).scheduler.schedule(e,(function(e,t){var n=r._processRequest(t);var s=r.hasCompleted||r.hasFailed;if(!s&&n>0){r.requestedCount=n;return Te((function(){r.requestedCount=0}))}}));return(this||t).requestedDisposable},disposeCurrentRequest:function(){if((this||t).requestedDisposable){(this||t).requestedDisposable.dispose();(this||t).requestedDisposable=null}}});return ControlledSubject}(Ot);yt.controlled=function(e,r){if(e&&Ze(e)){r=e;e=true}null==e&&(e=true);return new On(this||t,e,r)};yt.pipe=function(e){var t=this.pausableBuffered();function onDrain(){t.resume()}e.addListener("drain",onDrain);t.subscribe((function(r){!e.write(String(r))&&t.pause()}),(function(t){e.emit("error",t)}),(function(){!e._isStdio&&e.end();e.removeListener("drain",onDrain)}));t.resume();return e};var _n=function(e){Ee(TransduceObserver,e);function TransduceObserver(r,n){(this||t)._o=r;(this||t)._xform=n;e.call(this||t)}TransduceObserver.prototype.next=function(e){var r=D((this||t)._xform["@@transducer/step"]).call((this||t)._xform,(this||t)._o,e);r===C&&(this||t)._o.onError(r.e)};TransduceObserver.prototype.error=function(e){(this||t)._o.onError(e)};TransduceObserver.prototype.completed=function(){(this||t)._xform["@@transducer/result"]((this||t)._o)};return TransduceObserver}(vt);function transformForObserver(e){return{"@@transducer/init":function(){return e},"@@transducer/step":function(e,t){return e.onNext(t)},"@@transducer/result":function(e){return e.onCompleted()}}}yt.transduce=function(e){var r=this||t;return new wn((function(t){var n=e(transformForObserver(t));return r.subscribe(new _n(t,n))}),r)};var wn=b.AnonymousObservable=function(e){Ee(AnonymousObservable,e);function fixSubscriber(e){return e&&S(e.dispose)?e:S(e)?Te(e):je}function setDisposable(e,t){var r=t[0],n=t[1];var s=D(n.__subscribe).call(n,r);s!==C||r.fail(C.e)||thrower(C.e);r.setDisposable(fixSubscriber(s))}function AnonymousObservable(r,n){(this||t).source=n;(this||t).__subscribe=r;e.call(this||t)}AnonymousObservable.prototype._subscribe=function(e){var r=new gn(e),n=[r,this||t];Ge.scheduleRequired()?Ge.schedule(n,setDisposable):setDisposable(null,n);return r};return AnonymousObservable}(Ot);var gn=function(e){Ee(AutoDetachObserver,e);function AutoDetachObserver(r){e.call(this||t);(this||t).observer=r;(this||t).m=new Le}var r=AutoDetachObserver.prototype;r.next=function(e){var r=D((this||t).observer.onNext).call((this||t).observer,e);if(r===C){this.dispose();thrower(r.e)}};r.error=function(e){var r=D((this||t).observer.onError).call((this||t).observer,e);this.dispose();r===C&&thrower(r.e)};r.completed=function(){var e=D((this||t).observer.onCompleted).call((this||t).observer);this.dispose();e===C&&thrower(e.e)};r.setDisposable=function(e){(this||t).m.setDisposable(e)};r.getDisposable=function(){return(this||t).m.getDisposable()};r.dispose=function(){e.prototype.dispose.call(this||t);(this||t).m.dispose()};return AutoDetachObserver}(vt);var InnerSubscription=function(e,r){(this||t)._s=e;(this||t)._o=r};InnerSubscription.prototype.dispose=function(){if(!(this||t)._s.isDisposed&&null!==(this||t)._o){var e=(this||t)._s.observers.indexOf((this||t)._o);(this||t)._s.observers.splice(e,1);(this||t)._o=null}};var Sn=b.Subject=function(e){Ee(Subject,e);function Subject(){e.call(this||t);(this||t).isDisposed=false;(this||t).isStopped=false;(this||t).observers=[];(this||t).hasError=false}xe(Subject.prototype,ft.prototype,{_subscribe:function(e){Re(this||t);if(!(this||t).isStopped){(this||t).observers.push(e);return new InnerSubscription(this||t,e)}if((this||t).hasError){e.onError((this||t).error);return je}e.onCompleted();return je},hasObservers:function(){Re(this||t);return(this||t).observers.length>0},onCompleted:function(){Re(this||t);if(!(this||t).isStopped){(this||t).isStopped=true;for(var e=0,r=cloneArray((this||t).observers),n=r.length;e<n;e++)r[e].onCompleted();(this||t).observers.length=0}},onError:function(e){Re(this||t);if(!(this||t).isStopped){(this||t).isStopped=true;(this||t).error=e;(this||t).hasError=true;for(var r=0,n=cloneArray((this||t).observers),s=n.length;r<s;r++)n[r].onError(e);(this||t).observers.length=0}},onNext:function(e){Re(this||t);if(!(this||t).isStopped)for(var r=0,n=cloneArray((this||t).observers),s=n.length;r<s;r++)n[r].onNext(e)},dispose:function(){(this||t).isDisposed=true;(this||t).observers=null}});Subject.create=function(e,t){return new Dn(e,t)};return Subject}(Ot);var Cn=b.AsyncSubject=function(e){Ee(AsyncSubject,e);function AsyncSubject(){e.call(this||t);(this||t).isDisposed=false;(this||t).isStopped=false;(this||t).hasValue=false;(this||t).observers=[];(this||t).hasError=false}xe(AsyncSubject.prototype,ft.prototype,{_subscribe:function(e){Re(this||t);if(!(this||t).isStopped){(this||t).observers.push(e);return new InnerSubscription(this||t,e)}if((this||t).hasError)e.onError((this||t).error);else if((this||t).hasValue){e.onNext((this||t).value);e.onCompleted()}else e.onCompleted();return je},hasObservers:function(){Re(this||t);return(this||t).observers.length>0},onCompleted:function(){var e,r;Re(this||t);if(!(this||t).isStopped){(this||t).isStopped=true;var n=cloneArray((this||t).observers),r=n.length;if((this||t).hasValue)for(e=0;e<r;e++){var s=n[e];s.onNext((this||t).value);s.onCompleted()}else for(e=0;e<r;e++)n[e].onCompleted();(this||t).observers.length=0}},onError:function(e){Re(this||t);if(!(this||t).isStopped){(this||t).isStopped=true;(this||t).hasError=true;(this||t).error=e;for(var r=0,n=cloneArray((this||t).observers),s=n.length;r<s;r++)n[r].onError(e);(this||t).observers.length=0}},onNext:function(e){Re(this||t);if(!(this||t).isStopped){(this||t).value=e;(this||t).hasValue=true}},dispose:function(){(this||t).isDisposed=true;(this||t).observers=null;(this||t).error=null;(this||t).value=null}});return AsyncSubject}(Ot);var Dn=b.AnonymousSubject=function(e){Ee(AnonymousSubject,e);function AnonymousSubject(r,n){(this||t).observer=r;(this||t).observable=n;e.call(this||t)}xe(AnonymousSubject.prototype,ft.prototype,{_subscribe:function(e){return(this||t).observable.subscribe(e)},onCompleted:function(){(this||t).observer.onCompleted()},onError:function(e){(this||t).observer.onError(e)},onNext:function(e){(this||t).observer.onNext(e)}});return AnonymousSubject}(Ot);var En=b.BehaviorSubject=function(e){Ee(BehaviorSubject,e);function BehaviorSubject(r){e.call(this||t);(this||t).value=r;(this||t).observers=[];(this||t).isDisposed=false;(this||t).isStopped=false;(this||t).hasError=false}xe(BehaviorSubject.prototype,ft.prototype,{_subscribe:function(e){Re(this||t);if(!(this||t).isStopped){(this||t).observers.push(e);e.onNext((this||t).value);return new InnerSubscription(this||t,e)}(this||t).hasError?e.onError((this||t).error):e.onCompleted();return je},getValue:function(){Re(this||t);(this||t).hasError&&thrower((this||t).error);return(this||t).value},hasObservers:function(){Re(this||t);return(this||t).observers.length>0},onCompleted:function(){Re(this||t);if(!(this||t).isStopped){(this||t).isStopped=true;for(var e=0,r=cloneArray((this||t).observers),n=r.length;e<n;e++)r[e].onCompleted();(this||t).observers.length=0}},onError:function(e){Re(this||t);if(!(this||t).isStopped){(this||t).isStopped=true;(this||t).hasError=true;(this||t).error=e;for(var r=0,n=cloneArray((this||t).observers),s=n.length;r<s;r++)n[r].onError(e);(this||t).observers.length=0}},onNext:function(e){Re(this||t);if(!(this||t).isStopped){(this||t).value=e;for(var r=0,n=cloneArray((this||t).observers),s=n.length;r<s;r++)n[r].onNext(e)}},dispose:function(){(this||t).isDisposed=true;(this||t).observers=null;(this||t).value=null;(this||t).error=null}});return BehaviorSubject}(Ot);var xn=b.ReplaySubject=function(e){var r=Math.pow(2,53)-1;function createRemovableDisposable(e,t){return Te((function(){t.dispose();!e.isDisposed&&e.observers.splice(e.observers.indexOf(t),1)}))}Ee(ReplaySubject,e);function ReplaySubject(n,s,i){(this||t).bufferSize=null==n?r:n;(this||t).windowSize=null==s?r:s;(this||t).scheduler=i||Ge;(this||t).q=[];(this||t).observers=[];(this||t).isStopped=false;(this||t).isDisposed=false;(this||t).hasError=false;(this||t).error=null;e.call(this||t)}xe(ReplaySubject.prototype,ft.prototype,{_subscribe:function(e){Re(this||t);var r=new mt((this||t).scheduler,e),n=createRemovableDisposable(this||t,r);this._trim((this||t).scheduler.now());(this||t).observers.push(r);for(var s=0,i=(this||t).q.length;s<i;s++)r.onNext((this||t).q[s].value);(this||t).hasError?r.onError((this||t).error):(this||t).isStopped&&r.onCompleted();r.ensureActive();return n},hasObservers:function(){Re(this||t);return(this||t).observers.length>0},_trim:function(e){while((this||t).q.length>(this||t).bufferSize)(this||t).q.shift();while((this||t).q.length>0&&e-(this||t).q[0].interval>(this||t).windowSize)(this||t).q.shift()},onNext:function(e){Re(this||t);if(!(this||t).isStopped){var r=(this||t).scheduler.now();(this||t).q.push({interval:r,value:e});this._trim(r);for(var n=0,s=cloneArray((this||t).observers),i=s.length;n<i;n++){var o=s[n];o.onNext(e);o.ensureActive()}}},onError:function(e){Re(this||t);if(!(this||t).isStopped){(this||t).isStopped=true;(this||t).error=e;(this||t).hasError=true;var r=(this||t).scheduler.now();this._trim(r);for(var n=0,s=cloneArray((this||t).observers),i=s.length;n<i;n++){var o=s[n];o.onError(e);o.ensureActive()}(this||t).observers.length=0}},onCompleted:function(){Re(this||t);if(!(this||t).isStopped){(this||t).isStopped=true;var e=(this||t).scheduler.now();this._trim(e);for(var r=0,n=cloneArray((this||t).observers),s=n.length;r<s;r++){var i=n[r];i.onCompleted();i.ensureActive()}(this||t).observers.length=0}},dispose:function(){(this||t).isDisposed=true;(this||t).observers=null}});return ReplaySubject}(Ot);b.Pauser=function(e){Ee(Pauser,e);function Pauser(){e.call(this||t)}Pauser.prototype.pause=function(){this.onNext(false)};Pauser.prototype.resume=function(){this.onNext(true)};return Pauser}(Sn);o&&u?h?(u.exports=b).Rx=b:o.Rx=b:f.Rx=b;var An=captureLine()}).call(r);var i=n.exports;export default i;

