// yargs-parser@2.4.1 downloaded from https://ga.jspm.io/npm:yargs-parser@2.4.1/index.js

import e from"lodash.assign";import a from"camelcase";import r from"path";import t from"./lib/tokenize-arg-string.js";import s from"util";import n from"process";var i={};function _nullRequire(e){var a=new Error("Cannot find module '"+e+"'");a.code="MODULE_NOT_FOUND";throw a}var o=n;var c=e;var l=a;var f=r;var u=t;var h=s;function parse(e,a){a||(a={});e=u(e);var r=combineAliases(a.alias||{});var t=c({},{"short-option-groups":true,"camel-case-expansion":true,"dot-notation":true,"parse-numbers":true,"boolean-negation":true},a.configuration);var s=a.default||{};var n=a.configObjects||[];var i=a.envPrefix;var g={};var A=a.__||function(e){return h.format.apply(h,Array.prototype.slice.call(arguments))};var p=null;var y={aliases:{},arrays:{},bools:{},strings:{},numbers:{},counts:{},normalize:{},configs:{},defaulted:{},nargs:{}};[].concat(a.array).filter(Boolean).forEach((function(e){y.arrays[e]=true}));[].concat(a.boolean).filter(Boolean).forEach((function(e){y.bools[e]=true}));[].concat(a.string).filter(Boolean).forEach((function(e){y.strings[e]=true}));[].concat(a.number).filter(Boolean).forEach((function(e){y.numbers[e]=true}));[].concat(a.count).filter(Boolean).forEach((function(e){y.counts[e]=true}));[].concat(a.normalize).filter(Boolean).forEach((function(e){y.normalize[e]=true}));Object.keys(a.narg||{}).forEach((function(e){y.nargs[e]=a.narg[e]}));Array.isArray(a.config)||"string"===typeof a.config?[].concat(a.config).filter(Boolean).forEach((function(e){y.configs[e]=true})):Object.keys(a.config||{}).forEach((function(e){y.configs[e]=a.config[e]}));extendAliases(a.key,r,a.default,y.arrays);Object.keys(s).forEach((function(e){(y.aliases[e]||[]).forEach((function(a){s[a]=s[e]}))}));var v={_:[]};Object.keys(y.bools).forEach((function(e){setArg(e,e in s&&s[e]);setDefaulted(e)}));var d=[];if(-1!==e.indexOf("--")){d=e.slice(e.indexOf("--")+1);e=e.slice(0,e.indexOf("--"))}for(var m=0;m<e.length;m++){var b=e[m];var k;var E;var O;var j;var _;var N;if(b.match(/^--.+=/)||!t["short-option-groups"]&&b.match(/^-.+=/)){j=b.match(/^--?([^=]+)=([\s\S]*)$/);if(checkAllAliases(j[1],y.nargs)){e.splice(m+1,0,j[2]);m=eatNargs(m,j[1],e)}else if(checkAllAliases(j[1],y.arrays)&&e.length>m+1){e.splice(m+1,0,j[2]);m=eatArray(m,j[1],e)}else setArg(j[1],j[2])}else if(b.match(/^--no-.+/)&&t["boolean-negation"]){E=b.match(/^--no-(.+)/)[1];setArg(E,false)}else if(b.match(/^--.+/)||!t["short-option-groups"]&&b.match(/^-.+/)){E=b.match(/^--?(.+)/)[1];if(checkAllAliases(E,y.nargs))m=eatNargs(m,E,e);else if(checkAllAliases(E,y.arrays)&&e.length>m+1)m=eatArray(m,E,e);else{_=e[m+1];if(void 0===_||_.match(/^-/)||checkAllAliases(E,y.bools)||checkAllAliases(E,y.counts))if(/^(true|false)$/.test(_)){setArg(E,_);m++}else setArg(E,defaultForType(guessType(E,y)));else{setArg(E,_);m++}}}else if(b.match(/^-.\..+=/)){j=b.match(/^-([^=]+)=([\s\S]*)$/);setArg(j[1],j[2])}else if(b.match(/^-.\..+/)){_=e[m+1];E=b.match(/^-(.\..+)/)[1];if(void 0===_||_.match(/^-/)||checkAllAliases(E,y.bools)||checkAllAliases(E,y.counts))setArg(E,defaultForType(guessType(E,y)));else{setArg(E,_);m++}}else if(b.match(/^-[^-]+/)){O=b.slice(1,-1).split("");k=false;for(var x=0;x<O.length;x++){_=b.slice(x+2);if(O[x+1]&&"="===O[x+1]){N=b.slice(x+3);E=O[x];if(checkAllAliases(E,y.nargs)){e.splice(m+1,0,N);m=eatNargs(m,E,e)}else if(checkAllAliases(E,y.arrays)&&e.length>m+1){e.splice(m+1,0,N);m=eatArray(m,E,e)}else setArg(E,N);k=true;break}if("-"!==_){if(/[A-Za-z]/.test(O[x])&&/-?\d+(\.\d*)?(e-?\d+)?$/.test(_)){setArg(O[x],_);k=true;break}if(O[x+1]&&O[x+1].match(/\W/)){setArg(O[x],_);k=true;break}setArg(O[x],defaultForType(guessType(O[x],y)))}else setArg(O[x],_)}E=b.slice(-1)[0];if(!k&&"-"!==E)if(checkAllAliases(E,y.nargs))m=eatNargs(m,E,e);else if(checkAllAliases(E,y.arrays)&&e.length>m+1)m=eatArray(m,E,e);else{_=e[m+1];if(void 0===_||/^(-|--)[^-]/.test(_)||checkAllAliases(E,y.bools)||checkAllAliases(E,y.counts))if(/^(true|false)$/.test(_)){setArg(E,_);m++}else setArg(E,defaultForType(guessType(E,y)));else{setArg(E,_);m++}}}else v._.push(y.strings["_"]||!isNumber(b)?b:Number(b))}applyEnvVars(v,true);setConfig(v);setConfigObjects();applyEnvVars(v,false);applyDefaultsAndAliases(v,y.aliases,s);Object.keys(y.counts).forEach((function(e){hasKey(v,e.split("."))||setArg(e,0)}));d.forEach((function(e){v._.push(e)}));function eatNargs(e,a,r){var t=checkAllAliases(a,y.nargs);r.length-(e+1)<t&&(p=Error(A("Not enough arguments following: %s",a)));for(var s=e+1;s<t+e+1;s++)setArg(a,r[s]);return e+t}function eatArray(e,a,r){var t=e+1;for(var s=e+1;s<r.length;s++){if(/^-/.test(r[s])){s===t&&setArg(a,defaultForType("array"));break}e=s;setArg(a,r[s])}return e}function setArg(e,a){unsetDefaulted(e);(checkAllAliases(e,y.bools)||checkAllAliases(e,y.counts))&&"string"===typeof a&&(a="true"===a);if(/-/.test(e)&&!(y.aliases[e]&&y.aliases[e].length)&&t["camel-case-expansion"]){var r=l(e);y.aliases[e]=[r];g[r]=true}var s=a;if(!checkAllAliases(e,y.strings)){isNumber(a)&&(s=Number(a));isUndefined(a)||isNumber(a)||!checkAllAliases(e,y.numbers)||(s=NaN)}checkAllAliases(e,y.counts)&&(isUndefined(s)||"boolean"===typeof s)&&(s=increment);checkAllAliases(e,y.normalize)&&checkAllAliases(e,y.arrays)&&(s=f.normalize(a));var n=e.split(".");setKey(v,n,s);y.aliases[e]&&y.aliases[e].forEach((function(e){e=e.split(".");setKey(v,e,s)}));n.length>1&&t["dot-notation"]&&(y.aliases[n[0]]||[]).forEach((function(e){e=e.split(".");var a=[].concat(n);a.shift();e=e.concat(a);setKey(v,e,s)}));if(checkAllAliases(e,y.normalize)&&!checkAllAliases(e,y.arrays)){var i=[e].concat(y.aliases[e]||[]);i.forEach((function(e){v.__defineSetter__(e,(function(e){a=f.normalize(e)}));v.__defineGetter__(e,(function(){return"string"===typeof a?f.normalize(a):a}))}))}}function setConfig(e){var a={};applyDefaultsAndAliases(a,y.aliases,s);Object.keys(y.configs).forEach((function(r){var t=e[r]||a[r];if(t)try{var s=null;var n=f.resolve(o.cwd(),t);if("function"===typeof y.configs[r]){try{s=y.configs[r](n)}catch(e){s=e}if(s instanceof Error){p=s;return}}else s=_nullRequire(n);setConfigObject(s)}catch(a){e[r]&&(p=Error(A("Invalid JSON config file: %s",t)))}}))}function setConfigObject(e,a){Object.keys(e).forEach((function(r){var t=e[r];var s=a?a+"."+r:r;"[object Object]"===Object.prototype.toString.call(t)?setConfigObject(t,s):hasKey(v,s.split("."))&&!y.defaulted[s]||setArg(s,t)}))}function setConfigObjects(){"undefined"!==typeof n&&n.forEach((function(e){setConfigObject(e)}))}function applyEnvVars(e,a){if("undefined"!==typeof i){var r="string"===typeof i?i:"";Object.keys(o.env).forEach((function(t){if(""===r||0===t.lastIndexOf(r,0)){var s=t.split("__").map((function(e,a){0===a&&(e=e.substring(r.length));return l(e)}));!(a&&y.configs[s.join(".")]||!a)||hasKey(e,s)&&!y.defaulted[s.join(".")]||setArg(s.join("."),o.env[t])}}))}}function applyDefaultsAndAliases(e,a,r){Object.keys(r).forEach((function(t){if(!hasKey(e,t.split("."))){setKey(e,t.split("."),r[t]);(a[t]||[]).forEach((function(a){hasKey(e,a.split("."))||setKey(e,a.split("."),r[t])}))}}))}function hasKey(e,a){var r=e;t["dot-notation"]||(a=[a.join(".")]);a.slice(0,-1).forEach((function(e){r=r[e]||{}}));var s=a[a.length-1];return"object"===typeof r&&s in r}function setKey(e,a,r){var s=e;t["dot-notation"]||(a=[a.join(".")]);a.slice(0,-1).forEach((function(e){void 0===s[e]&&(s[e]={});s=s[e]}));var n=a[a.length-1];r===increment?s[n]=increment(s[n]):void 0===s[n]&&checkAllAliases(n,y.arrays)?s[n]=Array.isArray(r)?r:[r]:void 0===s[n]||checkAllAliases(n,y.bools)||checkAllAliases(n,y.counts)?s[n]=r:Array.isArray(s[n])?s[n].push(r):s[n]=[s[n],r]}function extendAliases(){Array.prototype.slice.call(arguments).forEach((function(e){Object.keys(e||{}).forEach((function(e){if(!y.aliases[e]){y.aliases[e]=[].concat(r[e]||[]);y.aliases[e].concat(e).forEach((function(a){if(/-/.test(a)&&t["camel-case-expansion"]){var r=l(a);y.aliases[e].push(r);g[r]=true}}));y.aliases[e].forEach((function(a){y.aliases[a]=[e].concat(y.aliases[e].filter((function(e){return a!==e})))}))}}))}))}function checkAllAliases(e,a){var r=false;var t=[].concat(y.aliases[e]||[],e);t.forEach((function(e){a[e]&&(r=a[e])}));return r}function setDefaulted(e){[].concat(y.aliases[e]||[],e).forEach((function(e){y.defaulted[e]=true}))}function unsetDefaulted(e){[].concat(y.aliases[e]||[],e).forEach((function(e){delete y.defaulted[e]}))}function defaultForType(e){var a={boolean:true,string:"",number:void 0,array:[]};return a[e]}function guessType(e,a){var r="boolean";a.strings&&a.strings[e]?r="string":a.numbers&&a.numbers[e]?r="number":a.arrays&&a.arrays[e]&&(r="array");return r}function isNumber(e){return!!t["parse-numbers"]&&("number"===typeof e||(!!/^0x[0-9a-f]+$/i.test(e)||/^[-+]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(e)))}function isUndefined(e){return void 0===e}return{argv:v,error:p,aliases:y.aliases,newAliases:g,configuration:t}}function combineAliases(e){var a=[];var r=true;var t={};Object.keys(e).forEach((function(r){a.push([].concat(e[r],r))}));while(r){r=false;for(var s=0;s<a.length;s++)for(var n=s+1;n<a.length;n++){var i=a[s].filter((function(e){return-1!==a[n].indexOf(e)}));if(i.length){a[s]=a[s].concat(a[n]);a.splice(n,1);r=true;break}}}a.forEach((function(e){e=e.filter((function(e,a,r){return r.indexOf(e)===a}));t[e.pop()]=e}));return t}function increment(e){return void 0!==e?e+1:1}function Parser(e,a){var r=parse(e.slice(),a);return r.argv}Parser.detailed=function(e,a){return parse(e.slice(),a)};i=Parser;var g=i;export default g;

