// engine-base@0.1.3 downloaded from https://ga.jspm.io/npm:engine-base@0.1.3/index.js

import e from"fs";import r from"engine-utils";import n from"component-emitter";import i from"lazy-cache";import t from"delimiter-regex";import o from"engine";import c from"mixin-deep";import s from"object.omit";import p from"object.pick";var m={};var a=i(null);var l=null;require=a;t;o;c;s;p;require=l;m=a;var f=m;var d={};var u=e;var v=r;var y=n;var g=f;var h=v.fromStringRenderer("base");y(h);h.Engine=g.Engine;h.options={name:"base",dest:{ext:".html"}};function compileSync(e,r){try{r=r||{};r.settings=r.settings||{};var n={};var i=g.merge(pick(r),pick(r.settings));var t=i.delims;var o=i.opts;var c=i.fns;n.imports=g.merge({},c.helpers,c.imports);n=g.merge({},n,t);true===r.debugEngine&&inspectHelpers(n,o);delete n.imports.with;delete n.imports.if;var s=new g.Engine(n);return s.compile(e,n)}catch(e){throw e}}function compile(e,r,n){if("function"===typeof r)return compile(e,{},r);if("function"!==typeof n)return compileSync(e,r);try{n(null,compileSync(e,r))}catch(e){n(e)}}function renderSync(e,r){r=r||{};r.settings=r.settings||{};var n={};var i=g.merge(pick(r),pick(r.settings));var t=i.delims;var o=i.opts;var c=i.fns;n.imports=g.merge({},c.helpers,c.imports);n=g.merge({},n,t);true===r.debugEngine&&inspectHelpers(n,o);if("function"===typeof e){var s=g.omit(r,["helpers","imports"]);return e(s)}try{var p=new g.Engine(n);return p.render(e,r)}catch(e){throw e}}function render(e,r,n){if("function"===typeof r)return render(e,{},r);if("function"!==typeof n)return renderSync(e,r);try{n(null,renderSync(e,r))}catch(e){return n(e)}}function renderFile(e,r,n){if("function"===typeof r)return renderFile(e,{},r);var i=u.readFileSync(e,"utf8");render(i,r,n)}function delimsObject(e){var r=e[0],n=e[1];var i={};i.interpolate=g.delims(r+"=",n);i.evaluate=g.delims(r,n);i.escape=g.delims(r+"-",n);return i}function inspectHelpers(e,r){var n=Object.keys(e.imports);for(var i in r)if(-1!==n.indexOf(i)){var t=conflictMessage(e,r,i);var o=new Error(t);o.id="helper-conflict";o.engine="engine-base";h.emit("error",o)}}function conflictMessage(e,r,n){var i=typeof e.imports[n];var t=typeof r[n];return'Property "'+n+'" is defined on '+"more than one object: \n"+" - `settings.imports` as "+article(i)+" "+i+"\n"+" - `options` as "+article(t)+" "+t}function article(e){var r=/^[aeiou]/.test(e);return r?"an":"a"}function pick(e){var r={};r.delims=g.pick(e,["interpolate","evaluate","escape"]);r.opts=g.omit(e,["helpers","imports"]);r.fns=g.pick(e,["helpers","imports"]);Array.isArray(e.delims)&&(r.delims=g.merge({},delimsObject(e.delims),r.delims));return r}h.__express=h.renderFile;d=h;d.render=render;d.renderFile=renderFile;d.renderSync=renderSync;d.compile=compile;d.compileSync=compileSync;var S=d;const b=d.render,k=d.renderFile,F=d.renderSync,x=d.compile,E=d.compileSync;export default S;export{x as compile,E as compileSync,b as render,k as renderFile,F as renderSync};

