// first-chunk-stream@1.0.0 downloaded from https://ga.jspm.io/npm:first-chunk-stream@1.0.0/index.js

import t from"util";import i from"stream";import r from"buffer";var s={};var e=r.Buffer;var f=t;var n=i.Transform;function ctor(t,i){f.inherits(FirstChunk,n);if("function"===typeof t){i=t;t={}}if("function"!==typeof i)throw new Error("transform function required");function FirstChunk(i){if(!(this instanceof FirstChunk))return new FirstChunk(i);n.call(this,i);this._firstChunk=true;this._transformCalled=false;this._minSize=t.minSize}FirstChunk.prototype._transform=function(t,r,s){this._enc=r;if(this._firstChunk){this._firstChunk=false;if(null==this._minSize){i.call(this,t,r,s);this._transformCalled=true;return}this._buffer=t;s()}else if(null!=this._minSize)if(this._buffer.length<this._minSize){this._buffer=e.concat([this._buffer,t]);s()}else if(this._buffer.length>=this._minSize){i.call(this,this._buffer.slice(),r,function(){this.push(t);s()}.bind(this));this._transformCalled=true;this._buffer=false}else{this.push(t);s()}else{this.push(t);s()}};FirstChunk.prototype._flush=function(t){if(this._buffer)if(this._transformCalled){this.push(this._buffer);t()}else i.call(this,this._buffer.slice(),this._enc,t);else t()};return FirstChunk}s=function(){return ctor.apply(ctor,arguments)()};s.ctor=ctor;var h=s;const u=s.ctor;export default h;export{u as ctor};

