// assemble-loader@0.6.1 downloaded from https://ga.jspm.io/npm:assemble-loader@0.6.1/index.js

import i from"fs";import e from"path";import t from"lazy-cache";import r from"extend-shallow";import n from"file-contents";import a from"fs-exists-sync";import o from"has-glob";import s from"is-registered";import l from"is-valid-glob";import d from"is-valid-instance";import p from"isobject";import f from"load-templates";import c from"process";var u={};var h=t(null);var v=null;require=h;r;n;a;o;s;l;d;p;f;require=v;h.isValid=function(i){return!!h.isValidInstance(i)&&!h.isRegistered(i,"assemble-loader")};h.isGlob=function(i,e){return!("undefined"!==typeof e&&!h.isObject(e))&&h.hasGlob(i)};h.hasAny=function(i,e){var t=e.length;while(t--)if(i.hasOwnProperty(e[t]))return true;return false};h.isOptions=function(i){return!!h.isObject(i)&&(!(i.isView||i.isItem||i._isVinyl)&&h.hasAny(i,["base","cwd"]))};h.isFilepath=function(i,e){return"string"===typeof i&&"undefined"===typeof e||h.isOptions(e)};u=h;var m=u;var w={};var V=c;var y=i;var b=e;var O=m;function loader(i,e){if(O.isObject(i)){e=i;i=void 0}return function plugin(t){if(O.isRegistered(t,"assemble-loader"))return plugin;O.isValidInstance(t)&&appLoader(this,e);O.isValidInstance(t,["views","items","collection"])&&collectionLoader(this,e);return O.isValidGlob(i)?viewLoader(t,e,i):plugin}}function viewLoader(i,e,t){i.loadViews(t,createOptions(i,e,{}));return i}function appLoader(i,e){var t=i.view;i.define("load",(function(r,n){var a=createOptions(i,e,n);var o={};var s=O.loader(o,a,t.bind(this));s.apply(this,arguments);return o}))}function collectionLoader(i,e){var t=i.addViews;var r=i.addView;i.define("addView",(function(i,e){return O.isFilepath(i,e)?this.loadView.apply(this,arguments):r.apply(this,arguments)}));i.define("addViews",(function(i,e){return O.isGlob(i,e)||O.isFilepath(i,e)?this.loadViews.apply(this,arguments):t.apply(this,arguments)}));i.define("load",(function(i,t){var n=createOptions(this,e,t);var a=O.loader(this.views,n,r.bind(this));a.apply(this,arguments);return this}));i.define("loadView",(function(i,t){if(O.hasGlob(i))return this.loadViews.apply(this,arguments);var r=createOptions(this,e,t);var n=b.resolve(r.cwd,i);var a=null;O.exists(n)&&(a=y.readFileSync(n));return this.addView(n,{contents:a})}));i.define("loadViews",(function(i,t){var r=createOptions(this,e,t);var n=O.loader({},r,this.addView.bind(this));n.apply(this,arguments);return this}))}function createOptions(i,e,t){var r=i.cwd||V.cwd();return O.extend({cwd:r},e,i.options,t)}w=loader;var g=w;export default g;

