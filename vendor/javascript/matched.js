// matched@0.4.4 downloaded from https://ga.jspm.io/npm:matched@0.4.4/index.js

import r from"path";import e from"arr-union";import t from"lazy-cache";import n from"glob";import a from"async-array-reduce";import i from"extend-shallow";import o from"fs-exists-sync";import c from"has-glob";import u from"is-valid-glob";import s from"resolve-dir";import l from"process";var f={};var v=l;var p=r;var d=e;var h=t(null);var g=null;require=h;n;a;i;o;c;u;s;require=g;h.arrayify=function(r){return r?Array.isArray(r)?r:[r]:[]};h.createCache=function(r){return r.reduce((function(r,e){var t=Object.keys(e);var n=t.length,a=-1;while(++a<n){var i=t[a];var o=e[i];Array.isArray(o)?d(r,o.map(join(i))):d(r,[i])}return r}),[])};function join(r){return function(e){return p.join(r,e)}}h.sift=function(r,e){r=h.arrayify(r);var t={includes:[],excludes:[]};var n=r.length,a=-1;while(++a<n){var i=new h.Stat(r[a],a);if(e.relative){i.pattern=h.toRelative(i.pattern,e);delete e.cwd}i.isNegated?t.excludes.push(i):t.includes.push(i)}t.stat=i;return t};h.setIgnores=function(r,e,t){var n=h.extend({},r);var a=[];var i=e.length,o=-1;while(++o<i){var c=e[o];c.index>t&&a.push(c.pattern)}n.ignore=h.arrayify(n.ignore||[]);n.ignore.push.apply(n.ignore,a);return n};h.Stat=function(r,e){this.index=e;this.isNegated=false;this.pattern=r;if("!"===r.charAt(0)){this.isNegated=true;this.pattern=r.slice(1)}};h.cwd=function(r){var e=r.cwd;/^\W/.test(e)&&(e=h.resolve(e));return p.resolve(e)};h.toRelative=function(r,e){var t=p.resolve(e.cwd,r);return p.relative(v.cwd(),t)};h.getPaths=function(r,e){r=r.filter((function(r){return h.exists(p.resolve(e.cwd,r))}));e.realpath&&(r=r.map((function(r){return p.resolve(e.cwd,r)})));return r};f=h;var y=f;var m={};var w=y;m=function(r,e,t){if("function"===typeof e){t=e;e={}}if("function"!==typeof t)throw new Error("expected a callback function.");if(w.isValidGlob(r)){var n=w.extend({cwd:""},e);n.cwd=w.cwd(n);r=w.arrayify(r);if(w.hasGlob(r)){var a=w.sift(r,n);var i=w.glob.Glob;var o=[];var c;w.reduce(a.includes,[],(function(r,e,t){var n=updateOptions(e);r.glob&&(n.cache=r.glob.cache);c=new i(e.pattern,n,(function(e,n){if(e)t(e);else{o.push(c.cache);r=r.concat(n);r.glob=c;t(null,r)}}))}),(function(r,e){if(r)t(r);else{Object.defineProperty(e,"cache",{configurable:true,get:function(){return w.createCache(o)}});delete e.glob;t(null,e)}}))}else{r=w.getPaths(r,n);t(null,r)}}else t(new Error("invalid glob pattern: "+r));function updateOptions(r){return w.setIgnores(n,a.excludes,r.index)}};var b=m;var x={};var O=y;x=function(r,e){if(!O.isValidGlob(r))throw new Error("invalid glob pattern: "+r);var t=O.extend({cwd:"",nosort:true},e);t.cwd=O.cwd(t);t.cache={};r=O.arrayify(r);if(!O.hasGlob(r))return O.getPaths(r,t);var n=O.sift(r,t);var a=n.excludes;var i=n.includes;var o=O.glob.Glob;var c={cache:{}};var u=[];function updateOptions(r){return O.setIgnores(t,a,r.index)}var s=i.length,l=-1;var f=[];while(++l<s){var v=i[l];var p=updateOptions(v);p.cache=c.cache;p.sync=true;c=new o(v.pattern,p);u.push(c.cache);f.push.apply(f,c.found)}Object.defineProperty(f,"cache",{configurable:true,get:function(){return O.createCache(u)}});return f};var j=x;var G={};var P=b;G=function(r,e){return new Promise((function(t,n){P(r,e,(function(r,e){r?n(r):t(e)}))}))};var A=G;var C={};C=b;C.sync=j;C.promise=A;var E=C;const I=C.sync,N=C.promise;export default E;export{N as promise,I as sync};

