// base-cli-schema@0.1.19 downloaded from https://ga.jspm.io/npm:base-cli-schema@0.1.19/index.js

import e from"path";import r from"lazy-cache";import i from"arr-flatten";import t from"array-unique";import a from"define-property";import n from"extend-shallow";import o from"fs-exists-sync";import l from"falsey";import s from"has-glob";import f from"has-value";import u from"kind-of";import m from"map-schema";import c from"mixin-deep";import p from"resolve";import d from"tableize-object";import v from"util";import g from"debug";import y from"export-files";var b={};function _nullRequire(e){var r=new Error("Cannot find module '"+e+"'");r.code="MODULE_NOT_FOUND";throw r}_nullRequire.resolve=_nullRequire;var h=e;var z=r(null);var w=null;require=z;i;t;a;n;o;l;s;f;u;m;c;p;d;require=w;z.tryResolve=function(e,r){/\.js$/.test(e)||(e+=".js");if("string"===typeof r)try{if(!z.exists(r))return;var i=h.resolve(r,e);return _nullRequire(i)}catch(e){}try{return _nullRequire(e)}catch(e){}try{return _nullRequire(h.resolve(e))}catch(e){}};z.arrayify=function(e){z.isString(e)&&(e=e.split(","));return Array.isArray(e)?e.filter(Boolean):[]};z.stripQuotes=function(e){return e.replace(/^['"]|['"]$/g,"")};z.isEmpty=function(e){return"function"!==typeof e&&!z.hasValue(e)};z.isObject=function(e){return"object"===z.typeOf(e)};z.isString=function(e){return e&&"string"===typeof e};z.unify=function(e){return z.flatten(z.arrayify(e))};z.stringify=function(e){e=z.tableize(e);var r="";for(var i in e)r+=i+"."+e[i];return r};z.invert=function invert(e){var r={};for(var i in e)r[e[i]]=i;return r};z.fileKeys=["base","basename","cwd","dir","dirname","ext","extname","f","file","filename","path","root","stem"];z.whitelist=["ask","data","emit","force","init","layout","option","options","readme","set","toc","verbose"].concat(z.fileKeys);z.aliases={dirname:"dir",extname:"ext",file:"f",filename:"stem",global:"g",save:"s",verbose:"v",version:"V"};b=z;var j=b;var x={};var k=j;var R;var q;x=function processArgs(e,r){var i=R||(R=k.invert(k.aliases));var t=q||(q=createMatchers(i));var a=r.length;var n=-1;while(++n<a)r[n]=replaceFlag(r[n],t);return e.argv(r,{esc:k.fileKeys,first:["init","new","ask","emit","global","save","config","file"],last:["tasks"]})};function createMatchers(e){var r={};for(var i in e){var t=e[i];r[i]={};r[i].re=new RegExp("(?:^|)-"+i+"(?!\\w)","g");r[i].val="--"+t}return r}function replaceFlag(e,r){for(var i in r){var t=r[i];if(t.re.test(e))return e.replace(t.re,t.val)}return e}var O=x;var E={};var _=v;var F=g;var A=F("base:cli:schema:field");var N=F("base:cli:schema");E.schema=N;E.field=function(e,r){"undefined"!==typeof r&&N("normalizing > "+e+": "+_.inspect(r,null,10))};E.results=function(e,r){"undefined"!==typeof r&&A("results > "+e+": "+_.inspect(r,null,10))};var U={};U=y(new URL(import.meta.url.slice(0,import.meta.url.lastIndexOf("/"))).pathname);var H=U;var K={};var L=O;var M=E;var S=H;var D=j;K=function(e,r){M.schema("initializing <%s>, called from <%s>",new URL(import.meta.url).pathname,(void 0).id);if("string"!==typeof e.cwd)throw new Error("expected the base-cwd plugin to be registered");if("undefined"===typeof e.pkg)throw new Error("expected the base-pkg plugin to be registered");if("function"!==typeof e.argv)throw new Error("expected the base-argv plugin to be registered");var i=D.merge({sortArrays:false,omitEmpty:true},r);var t=new D.Schema(i);t.app=e;t.field("config",["boolean","object","string"],{normalize:S.config(e,i)}).field("data",["boolean","object","string"],{normalize:S.data(e,i)}).field("disable","string",{normalize:S.disable(e,i)}).field("enable","string",{normalize:S.enable(e,i)}).field("options",["boolean","object","string"],{normalize:S.options(e,i)}).field("option",["boolean","object","string"],{normalize:S.option(e,i)});t.field("asyncHelpers",["array","string"],{normalize:S.asyncHelpers(e,i)}).field("helpers",["array","string"],{normalize:S.helpers(e,i)}).field("cwd",["boolean","string"],{normalize:S.cwd(e,i)}).field("dest",["boolean","string"],{normalize:S.dest(e,i)}).field("emit",["array","boolean","string"],{normalize:S.emit(e,i)}).field("pkg",["boolean","object"],{normalize:S.pkg(e,i)}).field("reflinks",["array","object","string"],{normalize:S.reflinks(e,i)}).field("related",["array","object","string"],{normalize:S.related(e,i)}).field("save",["object","string"],{normalize:S.save(e,i)}).field("tasks",["array","string"],{normalize:S.tasks(e,i)}).field("toc",["object","string","boolean"],{normalize:S.toc(e,i)}).field("use",["object","string","boolean"],{normalize:S.use(e,i)});t.field("layout",["object","string","boolean","null"],{normalize:S.layout(e,i)});var a=t.normalizeField;t.normalizeField=function(e,r,i,n){var o=t.get(e);var l="undefined"===typeof r&&"undefined"===typeof i[e]&&"undefined"===typeof o.default;if(!l){M.field(e,r);a.apply(t,arguments);"undefined"!==typeof i[e]&&M.results(e,i[e]);return i[e]}};var n=t.normalize;t.normalize=function(r){if(r.isNormalized)return r;var a=pluralize(L(e,r));var o=n.call(t,a,i);for(var l in D.aliases)o.hasOwnProperty(l)&&(o[D.aliases[l]]=o[l]);D.define(o,"isNormalized",true);return o};return t};function pluralize(e){var r=["helper","asyncHelper","plugin","engine","task"];var i={};for(var t in e){var a=e[t];"config"===t&&D.isObject(a)&&(a=pluralize(a));~r.indexOf(t)&&(t+="s");i[t]=a}return i}var V=K;export default V;

