// glob-stream@5.3.5 downloaded from https://ga.jspm.io/npm:glob-stream@5.3.5/index.js

import r from"through2";import e from"ordered-read-streams";import t from"unique-stream";import o from"glob";import n from"micromatch";import a from"to-absolute-glob";import i from"glob-parent";import f from"path";import l from"extend";import s from"process";var v={};var u=s;var m=r;var c=e;var p=t;var g=o;var d=n;var b=a;var h=i;var w=f;var y=l;var x="win32"===u.platform?/[\/\\]/:/\/+/;var E={createStream:function(r,e,t){var o=y({},t);delete o.root;var n=o.base||getBasePath(r,t);r=b(r,t);var a=new g.Glob(r,o);var i=m.obj(t,e.length?filterNegatives:void 0);var f=false;a.on("error",i.emit.bind(i,"error"));a.once("end",(function(){true!==t.allowEmpty&&!f&&globIsSingular(a)&&i.emit("error",new Error("File not found with singular glob: "+r));i.end()}));a.on("match",(function(r){f=true;i.write({cwd:t.cwd,base:n,path:w.normalize(r)})}));return i;function filterNegatives(r,t,o){var n=isMatch.bind(null,r);e.every(n)?o(null,r):o()}},create:function(r,e){e||(e={});"string"!==typeof e.cwd&&(e.cwd=u.cwd());"boolean"!==typeof e.dot&&(e.dot=false);"boolean"!==typeof e.silent&&(e.silent=true);"boolean"!==typeof e.nonull&&(e.nonull=false);"boolean"!==typeof e.cwdbase&&(e.cwdbase=false);e.cwdbase&&(e.base=e.cwd);Array.isArray(r)||(r=[r]);var t=[];var o=[];var n=y({},e);delete n.root;r.forEach((function(r,a){if("string"!==typeof r&&!(r instanceof RegExp))throw new Error("Invalid glob at index "+a);var i=isNegative(r)?o:t;if(i===o&&"string"===typeof r){var f=b(r,e);r=d.matcher(f,n)}i.push({index:a,glob:r})}));if(0===t.length)throw new Error("Missing positive glob");if(1===t.length)return streamFromPositive(t[0]);var a=t.map(streamFromPositive);var i=new c(a);var f=p("path");var l=i.pipe(f);i.on("error",(function(r){l.emit("error",r)}));return l;function streamFromPositive(r){var t=o.filter(indexGreaterThan(r.index)).map(toGlob);return E.createStream(r.glob,t,e)}}};function isMatch(r,e){return"function"===typeof e?e(r.path):e instanceof RegExp?e.test(r.path):void 0}function isNegative(r){return"string"===typeof r?"!"===r[0]:r instanceof RegExp||void 0}function indexGreaterThan(r){return function(e){return e.index>r}}function toGlob(r){return r.glob}function globIsSingular(r){var e=r.minimatch.set;return 1===e.length&&e[0].every((function isString(r){return"string"===typeof r}))}function getBasePath(r,e){var t;var o=h(r);t="/"===o&&e&&e.root?w.normalize(e.root):b(o,e);x.test(t.charAt(t.length-1))||(t+=w.sep);return t}v=E;var G=v;export default G;

