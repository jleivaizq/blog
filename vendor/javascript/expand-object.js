// expand-object@0.4.2 downloaded from https://ga.jspm.io/npm:expand-object@0.4.2/index.js

import r from"is-number";import e from"set-value";var t={};var n=r;var a=e;function expand(r,e){e=e||{};if("string"!==typeof r)throw new TypeError("expand-object expects a string.");if(!/[.|:=]/.test(r)&&/,/.test(r))return toArray(r);var t;if((t=/(\w+[:=]\w+\.)+/.exec(r))&&!/[|,+]/.test(r)){var n=t[0].split(":").join(".");r=n+r.slice(t[0].length)}var i=splitString(r,"|");var u=i.length,o=-1;var s={};if(isArrayLike(r)&&1===i.length)return expandArrayObj(r,e);while(++o<u){var n=i[o];if(/\w:\/\/\w/.test(n))s[n]="";else{var f=/^((?:\w+)\.(?:\w+))[:.]((?:\w+,)+)+((?:\w+):(?:\w+))/;var t=f.exec(n);if(t&&t[1]&&t[2]&&t[3]){var p=t[2];p=p.replace(/,$/,"");var c=p.split(",");c=c.concat(toObject(t[3]));s=a(s,t[1],c)}else/[.,\|:=]/.test(n)?s=expandObject(s,n,e):s[n]=!!e.toBoolean||""}}return s}function setValue(r,e,t,n){var i=resolveValue(t,n);if(~String(e).indexOf("."))return a(r,e,typeCast(i));r[e]=typeCast(i);return r}function resolveValue(r,e){e=e||{};if("undefined"===typeof r)return!!e.toBoolean||"";"string"===typeof r&&~r.indexOf(",")&&(r=toArray(r));return Array.isArray(r)?r.map((function(r){return~String(r).indexOf(".")?setValue({},r,!!e.toBoolean||""):r})):r}function expandArray(r,e){var t=String(r).split(/[:=]/);var n=t.shift();var a={},i=[];t.forEach((function(r){i=i.concat(resolveValue(toArray(r),e))}));a[n]=i;return a}function toArray(r){return(r||"").split(",").reduce((function(r,e){"undefined"!==typeof e&&""!==e&&r.push(typeCast(e));return r}),[])}function expandSiblings(r,e){var t=r.shift();var n=t.split(".");var i=[n.pop()].concat(r);var u=n.join(".");var o={};var s=i.reduce((function(r,t){expandObject(r,t,e);return r}),{});if(!u)return s;a(o,u,s);return o}function expandObject(r,e,t){var n=splitString(e,"+");if(n.length>1)return expandSiblings(n,t);n=e.split(/[:=]/);setValue(r,n[0],n[1]);return r}function expandArrayObj(r,e){var t=/\w+:.*?:/.exec(r);if(!t)return expandArray(r,e);var n=r.indexOf(":");var a=r.slice(0,n);var i=r.slice(n+1);if(/\w+,\w+,/.test(i)){var u={};u[a]=toArray(i).map((function(r){return~r.indexOf(":")?expandObject({},r,e):r}));return u}return toArray(r).map((function(r){return expandObject({},r,e)}))}function typeCast(r){return"true"===r||"false"!==r&&(n(r)?+r:r)}function isArrayLike(r){return"string"===typeof r&&/^(?:(\w+[:=]\w+[,:])+)+/.exec(r)}function toObject(r){var e={};var t=String(r).split(/[:=]/);e[t[0]]=typeCast(t[1]);return e}function splitString(r,e){r=String(r);var t=r.split(e);var n=t.length;var a=[];var i=-1;while(++i<n){var u=t[i];while("\\"===u[u.length-1])u=u.slice(0,-1)+e+t[++i];a.push(u)}return a}t=expand;var i=t;export default i;

