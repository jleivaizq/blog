// templates@0.24.3 downloaded from https://ga.jspm.io/npm:templates@0.24.3/index.js

import t from"base";import e from"debug";import i from"export-files";import"fs";import"lazy-cache";import"array-sort";import"async-each";import"base-data";import"base-engines";import"base-helpers";import"base-option";import"base-plugins";import"base-routes";import"deep-bind";import"define-property";import"engine-base";import"extend-shallow";import"falsey";import"get-value";import"get-view";import"group-array";import"has-glob";import"has-value";import"inflection";import"is-valid-app";import"layouts";import"match-file";import"mixin-deep";import"paginationator";import"pascalcase";import"set-value";import"template-error";import{_ as s}from"./_/c3b408c4.js";var o={};o=i(new URL(import.meta.url.slice(0,import.meta.url.lastIndexOf("/"))).pathname);var n=o;var p={};p=i(new URL(import.meta.url.slice(0,import.meta.url.lastIndexOf("/"))).pathname);var r=p;var a={};a=i(new URL(import.meta.url.slice(0,import.meta.url.lastIndexOf("/"))).pathname);var l=a;var m={};var u=t;var h=e("base:templates");var c=n;var f=r;var v=s;var w=l;m=m=Templates;function Templates(t){if(!(this instanceof Templates))return new Templates(t);u.call(this,null,t);this.is("templates");this.define("isApp",true);this.use(v.option());this.use(v.plugin());this.initTemplates()}f.static(u,Templates,"Templates");Templates.prototype.initTemplates=function(){h("initializing <%s>, called from <%s>",new URL(import.meta.url).pathname,(void 0).id);Templates.emit("templates.preInit",this);this.items={};this.views={};this.inflections={};this.listen(this);this.define("utils",v);this.use(f.init);this.use(f.renameKey());this.use(f.context);this.use(f.lookup);this.use(v.engines());this.use(v.helpers());this.use(v.routes());this.use(f.item("item","Item"));this.use(f.item("view","View"));for(var t in this.options.mixins)this.mixin(t,this.options.mixins[t]);c.view(this);this.expose("Item");this.expose("View");this.expose("List");this.expose("Collection");this.expose("Group");this.expose("Views");Templates.setup(this,"Templates");Templates.emit("templates.postInit",this)};Templates.prototype.expose=function(t){this.define(t,{configurable:true,enumerable:true,get:function(){return this.options[t]||Templates[t]}})};Templates.prototype.listen=function(t){this.on("option",(function(e,i){v.updateOptions(t,e,i)}));this.on("use",(function(t,e){if(t)for(var i in e.views)e.views.hasOwnProperty(i)&&e[i].use(t)}))};Templates.prototype.list=function(t){t=t||{};t.isList||v.defaults(t,this.options);var e=t.List||this.get("List");var i={};if(true===t.isList||t instanceof e)i=t;else{t.Item=t.Item||t.View||this.get("Item");i=new e(t)}this.extendList(i,t);this.emit("list",i,t);return i};Templates.prototype.collection=function(t,e){t=t||{};t.isCollection||v.defaults(t,this.options);var i=t.Collection||t.Views||this.get("Views");var s={};if(true===t.isCollection)s=t;else{t.Item=t.Item||t.View||this.get("View");s=new i(t)}if(true!==e){s.isViews&&s.viewType();this.run(s);this.emit("collection",s,t);this.extendViews(s,t);c.singular(this,s);c.plural(this,s)}else this.emit("collection",s,t);return s};Templates.prototype.create=function(t,e){h('creating view collection: "%s"',t);e=e||{};e.isCollection||(e=v.merge({},this.options,e));this.emit("create",t,e);var i=this.collection(e,true);v.setInstanceNames(i,t);var s=v.single(t);var o=v.plural(t);this.inflections[s]=o;i.option("inflection",s);i.option("plural",o);this.viewType(o,i.viewType());this.views[o]=i.items||i.views;this.define(o,(function(){return i.addViews.apply(i,arguments)}));this.define(s,(function(){return i.addView.apply(i,arguments)}));this[o].__proto__=i;this[s].__proto__=i;i.define(o,this[o]);i.define(s,this[s]);this.run(i);this.extendViews(i,e);this.emit("postCreate",i,e);c.singular(this,i);c.plural(this,i);return i};Templates.prototype.extendView=function(t,e){f.view(this,t,e);return this};Templates.prototype.extendViews=function(t,e){f.views(this,t,e);return this};Templates.prototype.extendList=function(t,e){f.list(this,t,e);return this};Templates.prototype.resolveLayout=function(t){h('resolving layout for "%s"',t.key);if(!v.isPartial(t)&&"undefined"===typeof t.layout&&t.options&&t.options.collection){var e=this[t.options.collection];var i=e.resolveLayout(t);"undefined"===typeof i&&(i=this.option("layout"));return i}return t.layout};Templates.setup=function(t,e){var i=t.options["init"+e||t.constructor.name];"function"===typeof i&&i.call(t,t,t.options)};Templates.Base=u;Templates.Collection=w.collection;Templates.List=w.list;Templates.Group=w.group;Templates.Views=w.views;Templates.Item=w.item;Templates.View=w.view;v.define(Templates,"utils",v);v.define(Templates,"_",{lib:w,plugin:f});var d=m;export default d;

