// expand-args@0.4.3 downloaded from https://ga.jspm.io/npm:expand-args@0.4.3/index.js

import e from"lazy-cache";import r from"expand-object";import t from"kind-of";import n from"minimist";import i from"mixin-deep";import a from"omit-empty";import o from"set-value";var s={};var u=e(null);var f=null;require=u;r;t;n;i;a;o;require=f;s=u;var c=s;var p={};var l=c;var m=/[=:]/;function expand(e,r){var t=l.merge({},r);var n={};var i;var a;var o;Array.isArray(e)&&(e=e.reduce((function(e,r){if("string"===typeof r&&isWindowsPath(r)){n._=n._||[];n._.push(r);return e}e.push(r);return e}),[]));e=preProcess(e,r);function merge(e,r){"_"===e?n=l.merge({},n,r):l.set(n,e,r)}for(o in e)if(e.hasOwnProperty(o)){a=e[o];if("string"===typeof a&&isWindowsPath(a)){n[o]=a;continue}if(m.test(o)&&isBoolean(a)){i=o.split(m);a=i.pop();o=i.join(".")}a=toBoolean(a);switch(l.typeOf(a)){case"object":n[o]=expand(a);break;case"string":if(~a.indexOf("|")){a=a.split("|");l.set(n,o,expandEach(a))}else if(isUrl(a))l.set(n,o,expandString(a));else if(/\w,\w/.test(a)){a=expandString(a);Array.isArray(a)&&hasObjects(a)?a.forEach((function(e){merge(o,toBoolean(e))})):merge(o,a)}else if(m.test(a)){t.esc&&~t.esc.indexOf(o)&&(a=a.split(".").join("\\."));var s=o+":"+a;i=s.split(m);a=toBoolean(i.pop());o=i.join(".");l.set(n,o,expandString(a))}else n[o]=a.split("\\.").join(".");break;case"array":hasObjects(a)?merge(o,expandEach(a)):n[o]=a.map((function(e){return toBoolean(e)}));break;case"boolean":default:n[o]=a;break}}return n}function expandString(e){if(isUrl(e))return e;if(isPath(e)){e=unescape(e);return~e.indexOf(":")?toObject(e):~e.indexOf(",")?e.split(","):toBoolean(e)}return/^[\s\w]+$/.test(e)?e:l.expand(e,{toBoolean:true})}function preProcess(e,r){var t={};if(Array.isArray(e)){e=e.reduce((function(e,r){return/['"]/.test(r)?e.concat(r):e.concat(r.split(" "))}),[]);e=e.map((function(e){if(isUrl(e)||/['"]/.test(e)){e=e.replace(/^-+/,"");var r=/[=:.]/.exec(e);if(r){var n=e.slice(0,r.index);var i=e.slice(r.index+1);if(isUrl(i)){t[n]=i;return}if(/^['"]/.test(i)&&/['"]$/.test(i)){t[n]=i.slice(1,i.length-1);return}}return e}/=.*,/.test(e)||(e=e.split(":").join("="));return e}));e=l.minimist(e,r)}e=l.merge({},e,t);return l.omitEmpty(e)}function expandEach(e){var r=e.length;var t=-1;var n={};while(++t<r)l.merge(n,expand(l.expand(e[t],{toBoolean:true})));return n}function isBoolean(e){return"false"===e||"true"===e||false===e||true===e}function isUrl(e){return/\w+:\/\/\w/.test(e)}function isWindowsPath(e){return/^\w:[\\\/]/.test(e)}function isPath(e){return/(?:[\\\/]|\\\.)/.test(e)}function unescape(e){if(isString(e))return e.split("\\").join("");if(isObject(e)){for(var r in e)e[r]=unescape(e[r]);return e}return Array.isArray(e)?e.map(unescape):e}function isString(e){return"string"===typeof e}function toBoolean(e){"true"===e&&(e=true);"false"===e&&(e=false);return e}function isObject(e){return"object"===l.typeOf(e)}function toObject(e){var r={};var t=e.split(":");var n=t.pop();r[t.join(".")]=n;return r}function hasObjects(e){var r=e.length;var t=-1;while(++t<r)if(isObject(e[t])||/[:=|,]/.test(e[t]))return true;return false}p=expand;var d=p;export default d;

